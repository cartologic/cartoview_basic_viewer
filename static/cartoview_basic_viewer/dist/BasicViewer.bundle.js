!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("BasicViewer",[],t):"object"==typeof exports?exports.BasicViewer=t():e.BasicViewer=t()}(window,function(){return function(e){function t(t){for(var n,u,o=t[0],i=t[1],d=t[2],f=0,c=[];f<o.length;f++)u=o[f],r[u]&&c.push(r[u][0]),r[u]=0;for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n]);for(s&&s(t);c.length;)c.shift()();return l.push.apply(l,d||[]),a()}function a(){for(var e,t=0;t<l.length;t++){for(var a=l[t],n=!0,o=1;o<a.length;o++){var i=a[o];0!==r[i]&&(n=!1)}n&&(l.splice(t--,1),e=u(u.s=a[0]))}return e}var n={},r={3:0},l=[];function u(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,u),a.l=!0,a.exports}u.m=e,u.c=n,u.d=function(e,t,a){u.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},u.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.t=function(e,t){if(1&t&&(e=u(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(u.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)u.d(a,n,function(t){return e[t]}.bind(null,n));return a},u.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return u.d(t,"a",t),t},u.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},u.p="/static/cartoview_basic_viewer/dist/";var o=window.webpackJsonp_name_=window.webpackJsonp_name_||[],i=o.push.bind(o);o.push=t,o=o.slice();for(var d=0;d<o.length;d++)t(o[d]);var s=i;return l.push(["qnMZ",0,2]),a()}({"/rak":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=j(a("Yz+Y")),r=j(a("iCc5")),l=j(a("V7oC")),u=j(a("FYw3")),o=j(a("mRg0")),i=a("8kXw"),d=j(i),s=j(a("nV/U")),f=j(a("AwYw")),c=j(a("BP9j")),p=j(a("HEer")),m=j(a("07X8")),h=j(a("7y31")),g=j(a("Rme4")),y=j(a("rXAq")),b=j(a("E8kk")),v=j(a("fgxa")),E=j(a("JgXy")),w=j(a("NABS")),C=j(a("zOyN")),T=j(a("aAba")),S=j(a("4eE1")),L=a("f002"),P=j(a("r2we")),x=j(a("vm6e")),R=j(a("Nv8t")),F=j(a("pPbJ")),_=j(a("IQpg")),q=j(a("TSlj")),k=j(a("17x9")),M=j(a("q1tI")),D=j(a("bSwy")),N=j(a("WK16")),I=j(a("TSYQ")),O=a("SUMQ");function j(e){return e&&e.__esModule?e:{default:e}}var z=function(e){function t(){var e,a,l,o;(0,r.default)(this,t);for(var i=arguments.length,d=Array(i),s=0;s<i;s++)d[s]=arguments[s];return a=l=(0,u.default)(this,(e=t.__proto__||(0,n.default)(t)).call.apply(e,[this].concat(d))),l.state={about:!1},l.handleAboutChange=function(){var e=l.state.about;l.setState({about:!e})},o=a,(0,u.default)(l,o)}return(0,o.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.className,n=e.createLegends,r=e.urls,l=e.mapLayers,u=e.changeLayerOrder,o=e.handleLayerVisibilty,k=e.config,O=e.exportMap,j=e.handleFeaturesTableDrawer,z=e.map,V=e.setThumbnail,Y=e.thumbnailSaving,Q=e.baseMaps,B=e.handleLayerOpacity,G=e.handleBaseMapVisibilty,W=e.downloadLayer,U=e.handleTableLayerChange,A=e.zoomToLayerData,Z=this.state.about;return M.default.createElement(F.default,{elevation:6,className:(0,I.default)(t.root,a)},M.default.createElement(R.default,null),M.default.createElement(F.default,{className:t.drawerPaper,elevation:0},M.default.createElement(E.default,{disablePadding:!0},M.default.createElement(w.default,{onTouchTap:function(){return window.location.href=r.appInstancesPage},button:!0},M.default.createElement(C.default,null,M.default.createElement(g.default,null)),M.default.createElement(S.default,{primary:"Home"})),k.showLayerSwitcher&&M.default.createElement(h.default,{open:!1,title:"Layers",icon:M.default.createElement(v.default,null)},M.default.createElement(d.default,{handleFeaturesTableDrawer:j,handleLayerOpacity:B,handleTableLayerChange:U,urls:r,downloadLayer:W,handleLayerVisibilty:o,changeLayerOrder:u,mapLayers:l,zoomToLayerData:A})),k.showLegend&&M.default.createElement(h.default,{open:!1,title:"Legend",icon:M.default.createElement(y.default,null)},M.default.createElement(p.default,{createLegends:n})),M.default.createElement(h.default,{open:!1,title:"Base Maps",icon:M.default.createElement(x.default,null)},M.default.createElement(i.BaseMapSwitcher,{baseMaps:Q,handleBaseMapVisibilty:G})),k.bookmarks&&M.default.createElement(h.default,{open:!1,title:"Bookmarks",icon:M.default.createElement(P.default,null)},M.default.createElement(c.default,{map:z,bookmarks:k.bookmarks})),M.default.createElement(h.default,{open:!1,title:"Print Tools",icon:M.default.createElement(q.default,null)},M.default.createElement(E.default,null,M.default.createElement(h.default,{open:!1,title:"Print PDF",icon:M.default.createElement(_.default,null)},M.default.createElement(m.default,{token:k.token,urls:r,map:z})),k.showExportMap&&M.default.createElement(w.default,{onTouchTap:O,button:!0},M.default.createElement(C.default,null,M.default.createElement(s.default,null)),M.default.createElement(S.default,{primary:"Export Map (PNG/JPG)"})))),k.enableFeatureTable&&M.default.createElement(w.default,{onTouchTap:j,button:!0},M.default.createElement(C.default,null,M.default.createElement(D.default,null)),M.default.createElement(S.default,{primary:"Query"})),M.default.createElement(w.default,{onTouchTap:V,button:!0},M.default.createElement(C.default,null,M.default.createElement(N.default,null)),M.default.createElement(S.default,{primary:"Set Thumbnail"}),Y&&M.default.createElement(T.default,null,M.default.createElement(L.Loader,{size:20,thickness:4}))),M.default.createElement(w.default,{onTouchTap:this.handleAboutChange,button:!0},M.default.createElement(C.default,null,M.default.createElement(b.default,null)),M.default.createElement(S.default,{primary:"About"})),M.default.createElement(f.default,{open:Z,title:k.title,abstract:k.abstract,close:this.handleAboutChange}))))}}]),t}(M.default.Component);z.propTypes={classes:k.default.object.isRequired,className:k.default.string.isRequired,changeLayerOrder:k.default.func.isRequired,createLegends:k.default.func.isRequired,handleTableLayerChange:k.default.func.isRequired,resetTablePagination:k.default.func.isRequired,urls:k.default.object.isRequired,mapLayers:k.default.array.isRequired,baseMaps:k.default.array.isRequired,handleLayerVisibilty:k.default.func.isRequired,exportMap:k.default.func.isRequired,downloadLayer:k.default.func.isRequired,handleFeaturesTableDrawer:k.default.func.isRequired,config:k.default.object.isRequired,map:k.default.object.isRequired,setThumbnail:k.default.func.isRequired,handleLayerOpacity:k.default.func.isRequired,thumbnailSaving:k.default.bool.isRequired,handleBaseMapVisibilty:k.default.func.isRequired,handlePrintModal:k.default.func.isRequired,zoomToLayerData:k.default.func.isRequired},t.default=(0,O.withStyles)(function(e){return{root:{height:"100%"},drawerPaper:{padding:0,height:"calc(100% - 64px)",overflowY:"scroll"},button:{margin:e.spacing.unit}}})(z)},"07X8":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=E(a("Yz+Y")),r=E(a("iCc5")),l=E(a("V7oC")),u=E(a("FYw3")),o=E(a("mRg0")),i=E(a("YEIV")),d=E(a("1OZW")),s=E(a("1DzM")),f=E(a("ctcd")),c=a("f002"),p=E(a("n5s8")),m=E(a("2KZF")),h=E(a("17x9")),g=E(a("q1tI")),y=E(a("XdPI")),b=E(a("ZqOF")),v=a("SUMQ");function E(e){return e&&e.__esModule?e:{default:e}}var w=function(e){function t(e){(0,r.default)(this,t);var a=(0,u.default)(this,(t.__proto__||(0,n.default)(t)).call(this,e));a.showBox=function(){var e=a.state,t=e.scale,n=e.dpi,r=e.layout,l=a.printModule.getPolygonCoords(t,n,r),u=a.printModule.getPolygonFeature(l);a.printModule.addPrintLayer(u)},a.print=function(){var e=a.state,t=e.title,n=e.comment,r=e.layout,l=e.dpi,u=e.scale;a.setState({printLoading:!0}),r&&l&&u&&a.printModule.createPDF(t,n,r,l,u).then(function(e){a.setState({printLoading:!e})}).catch(function(e){a.setState({printLoading:!1})})},a.handleChange=function(e){return function(t){var n=t.target.value;"title"===e&&n.length<100?a.setState((0,i.default)({},e,n)):"title"!==e&&a.setState((0,i.default)({},e,n))}},a.handleSelectChange=function(e){var t=e.target.value,n=e.target.name;a.setState((0,i.default)({},n,t),a.showBox)};var l=a.props,o=l.token,d=l.urls,s=l.map;return a.state={title:"",comment:"",layout:"Landscape",dpi:96,scale:"",printLoading:!1},a.printModule=new m.default(s,d.geoserverUrl,o,d.proxy),a}return(0,o.default)(t,e),(0,l.default)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.state.dpi;this.printModule.getPrintInfo().then(function(a){var n=e.printModule._getLayout(),r=[n.map.width,n.map.height],l=e.printModule.getOptimalScale(r,t);e.setState({scale:l,layout:n.name})})}},{key:"componentWillUnmount",value:function(){this.printModule.removePrintLayer()}},{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state.printLoading,n=this.printModule.pdfInfo;return g.default.createElement("div",null,g.default.createElement("div",{className:t.modalContent},g.default.createElement(b.default,{id:"title",label:"Title",className:t.textField,value:this.state.title,onChange:this.handleChange("title"),margin:"normal",fullWidth:!0}),g.default.createElement(b.default,{id:"comment",label:"Comment",multiline:!0,rowsMax:"4",className:t.textField,value:this.state.comment,onChange:this.handleChange("comment"),margin:"normal",fullWidth:!0}),n&&g.default.createElement(s.default,{className:t.formControl},g.default.createElement(f.default,{htmlFor:"print-layout"},"Layout"),g.default.createElement(y.default,{classes:{select:t.fullWidth},value:this.state.layout,onChange:this.handleSelectChange,inputProps:{name:"layout",id:"print-layout"}},n&&n.layouts.map(function(e,t){return g.default.createElement(p.default,{key:t,value:e.name},e.name)}))),n&&g.default.createElement(s.default,{className:t.formControl},g.default.createElement(f.default,{htmlFor:"print-layout"},"Scale"),g.default.createElement(y.default,{classes:{select:t.fullWidth},value:this.state.scale,onChange:this.handleSelectChange,inputProps:{name:"scale",id:"print-scale"}},g.default.createElement(p.default,{value:""},g.default.createElement("em",null,"None")),n&&n.scales.map(function(e,t){return g.default.createElement(p.default,{key:t,value:Number(e.value)},e.name)}))),n&&g.default.createElement(s.default,{className:t.formControl},g.default.createElement(f.default,{htmlFor:"print-layout"},"DPI"),g.default.createElement(y.default,{classes:{select:t.fullWidth},value:this.state.dpi,onChange:this.handleSelectChange,inputProps:{name:"dpi",id:"print-dpi"}},n&&n.dpis.map(function(e,t){return g.default.createElement(p.default,{key:t,value:Number(e.value)},e.name)})))),g.default.createElement("div",{className:t.actionButtons},g.default.createElement(d.default,{onClick:this.showBox,color:"primary"},"Show Print Box"),g.default.createElement(d.default,{onClick:this.print,color:"primary"},"Print"),g.default.createElement(d.default,{onClick:function(){return e.printModule.removePrintLayer()},color:"secondary",autoFocus:!0},"Cancel"),a&&g.default.createElement(c.Loader,null)))}}]),t}(g.default.Component);w.propTypes={token:h.default.string,map:h.default.object.isRequired,classes:h.default.object.isRequired,urls:h.default.object.isRequired},t.default=(0,v.withStyles)(function(e){return{container:{display:"flex",flexWrap:"wrap"},textField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit},menu:{width:200},formControl:{margin:e.spacing.unit,width:"100%"},selectEmpty:{marginTop:2*e.spacing.unit},fullWidth:{width:"100%"},modalContent:{display:"block",justifyContent:"center",alignItems:"center",flexDirection:"column",flex:".5",margin:2*e.spacing.unit},mapDiv:{width:"100%",height:"100%",boxSizing:"content-box",position:"relative"},mapContainer:{width:"752px",height:"300px",boxSizing:"content-box",border:"2px black solid"},root:(0,i.default)({display:"flex",flexDirection:"column",height:"100%"},e.breakpoints.down("md"),{flexDirection:"column",overflowY:"scroll"}),actionButtons:{display:"flex",justifyContent:"center"},button:{margin:e.spacing.unit}}})(w)},"6V6Y":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=c(a("Yz+Y")),r=c(a("iCc5")),l=c(a("V7oC")),u=c(a("FYw3")),o=c(a("mRg0"));t.logger=function(e,t){switch(t=t||"black"){case"success":t="Green";break;case"info":t="DodgerBlue";break;case"error":t="Red";break;case"warning":t="Orange";break;default:t=t}console.log("%c"+e,"color:"+t)};var i=a("f002"),d=c(a("17x9")),s=c(a("q1tI")),f=a("SUMQ");function c(e){return e&&e.__esModule?e:{default:e}}var p=function(e){function t(e){(0,r.default)(this,t);var a=(0,u.default)(this,(t.__proto__||(0,n.default)(t)).call(this,e));return a.state={hasError:!1},a}return(0,o.default)(t,e),(0,l.default)(t,[{key:"componentDidCatch",value:function(e,t){this.setState({hasError:!0,error:e,info:t})}},{key:"render",value:function(){var e=this.props.classes;return this.state.hasError?s.default.createElement("div",{className:e.root},s.default.createElement(i.Message,{message:"Something went wrong.",type:"title"}),s.default.createElement(i.Message,{message:"Contact us >> cartoview@cartologic.com",type:"title"}),s.default.createElement("br",null),s.default.createElement(i.Message,{noWrap:!1,message:""+this.state.error.toString(),type:"subheading"}),s.default.createElement(i.Message,{noWrap:!1,message:""+this.state.info.componentStack,type:"subheading"})):this.props.children}}]),t}(s.default.Component);p.propTypes={classes:d.default.object.isRequired,children:d.default.node.isRequired},t.default=(0,f.withStyles)(function(e){return{root:{height:"100%",padding:2*e.spacing.unit}}})(p)},"7y31":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=w(a("YEIV")),r=w(a("Yz+Y")),l=w(a("iCc5")),u=w(a("V7oC")),o=w(a("FYw3")),i=w(a("mRg0")),d=w(a("ciEP")),s=w(a("EHL7")),f=w(a("1iKp")),c=w(a("1IiC")),p=w(a("NABS")),m=w(a("zOyN")),h=w(a("aAba")),g=w(a("4eE1")),y=w(a("17x9")),b=w(a("q1tI")),v=w(a("TSYQ")),E=a("SUMQ");function w(e){return e&&e.__esModule?e:{default:e}}var C=function(e){function t(e){(0,l.default)(this,t);var a=(0,o.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));a.handleDetailsExpand=function(){a.setState({expanded:!a.state.expanded})};var n=a.props.open;return a.state={expanded:void 0===n||n},a}return(0,i.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.children,r=e.title,l=e.icon;return b.default.createElement("div",null,b.default.createElement(p.default,{button:!0,onTouchTap:this.handleDetailsExpand},b.default.createElement(m.default,null,l),b.default.createElement(g.default,{primary:r}),b.default.createElement(h.default,null,b.default.createElement(c.default,{className:(0,v.default)(t.expand,(0,n.default)({},t.expandOpen,this.state.expanded)),onTouchTap:this.handleDetailsExpand,"aria-expanded":this.state.expanded,"aria-label":"Show more"},b.default.createElement(f.default,null)))),b.default.createElement(d.default,{in:this.state.expanded,transitionduration:"auto",unmountOnExit:!0},a,b.default.createElement(s.default,null)))}}]),t}(b.default.Component);C.propTypes={classes:y.default.object.isRequired,title:y.default.string.isRequired,children:y.default.object.isRequired,open:y.default.bool,icon:y.default.object.isRequired},t.default=(0,E.withStyles)(function(e){return{expand:{transform:"rotate(0deg)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"}}})(C)},"8kXw":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseMapSwitcher=void 0;var n=F(a("Yz+Y")),r=F(a("iCc5")),l=F(a("V7oC")),u=F(a("FYw3")),o=F(a("mRg0"));a("P5Gt");var i=a("Nxrd"),d=F(a("XaW4")),s=F(a("KwhB")),f=F(a("P5iC")),c=F(a("1DzM")),p=F(a("JOJA")),m=F(a("CQWw")),h=F(a("3/Tk")),g=F(a("JgXy")),y=F(a("NABS")),b=F(a("WqRt")),v=F(a("n5s8")),E=a("f002"),w=F(a("pPbJ")),C=F(a("17x9")),T=F(a("7c0o")),S=F(a("NzOW")),L=F(a("q1tI")),P=F(a("YVZI")),x=a("Yvh9"),R=a("SUMQ");function F(e){return e&&e.__esModule?e:{default:e}}var _=(0,i.SortableHandle)(function(){return L.default.createElement(s.default,null)}),q=(0,i.SortableElement)(function(e){var t=e.layer,a=e.layerIndex,n=e.handleLayerVisibilty,r=e.zoomToLayerData,l=e.downloadLayer,u=e.urls,o=e.handleTableLayerChange,i=e.handleFeaturesTableDrawer,s=e.handleLayerOpacity,c=t.getProperties().name,p=t.getProperties().title;return L.default.createElement(y.default,{disableGutters:!0,className:"layer-switcher-item dense"},L.default.createElement(_,null),L.default.createElement(d.default,{checked:t.getVisible(),tabIndex:-1,onChange:n(a),disableRipple:!0}),L.default.createElement("div",{className:"element-flex element-column title-noWrap"},L.default.createElement(E.Message,{message:p,noWrap:!0,align:"left",type:"body1"}),L.default.createElement(h.default,{minValue:0,maxValue:1,step:.1,value:t.getOpacity(),onChange:s(a)})),L.default.createElement(f.default,null,L.default.createElement(v.default,{onTouchTap:function(){return r(c)}},"Zoom To Layer Data"),L.default.createElement(v.default,{onTouchTap:function(){return l(c)}},"Download Layer"),L.default.createElement(v.default,{onTouchTap:function(){return window.open(u.layerMetaData(c),"_blank")}},"Metadata Details"),L.default.createElement(v.default,{onTouchTap:function(){var e=new P.default(u.proxy).getParamterizedURL(u.wfsURL,{service:"wfs",version:"2.0.0",request:"GetFeature",typeNames:t.get("name"),outputFormat:"json"});(0,x.copyToClipboard)(e).then(function(e){return alert("WFS URL Copied Successfully")})}},"Copy WFS URL"),L.default.createElement(v.default,{onTouchTap:function(){o({target:{value:c}}),i()}},"Query/Table")))}),k=(0,i.SortableContainer)(function(e){var t=e.layers,a=e.handleLayerVisibilty,n=e.zoomToLayerData,r=e.downloadLayer,l=e.urls,u=e.handleTableLayerChange,o=e.handleFeaturesTableDrawer,i=e.handleLayerOpacity;return L.default.createElement(g.default,{disablePadding:!0,subheader:L.default.createElement(b.default,null,"Drag & Drop To Order the Layers")},t.map(function(e,t){return L.default.createElement(q,{handleLayerVisibilty:a,zoomToLayerData:n,downloadLayer:r,urls:l,handleTableLayerChange:u,handleFeaturesTableDrawer:o,handleLayerOpacity:i,key:"item-"+t,index:t,layerIndex:t,layer:e})}))}),M=function(e){function t(){return(0,r.default)(this,t),(0,u.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,o.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){for(var e=this.props,t=e.baseMaps,a=e.handleBaseMapVisibilty,n=e.classes,r=null,l=0;l<t.length;l++){var u=t[l];if(u.getVisible()){r=u.get("id");break}}return L.default.createElement(c.default,{component:"fieldset",className:n.formControl},L.default.createElement(m.default,{component:"legend"},"BaseMaps"),L.default.createElement(S.default,{"aria-label":"BaseMapSwithcer",name:"base_map_switcher",className:n.group,value:r,onChange:a},t.map(function(e,t){return L.default.createElement(p.default,{key:"item-"+t,value:e.get("id"),control:L.default.createElement(T.default,null),label:e.get("title")})})))}}]),t}(L.default.Component);M.propTypes={baseMaps:C.default.array.isRequired,classes:C.default.object.isRequired,handleBaseMapVisibilty:C.default.func.isRequired};t.BaseMapSwitcher=(0,R.withStyles)(function(e){return{formControl:{margin:3*e.spacing.unit},group:{margin:e.spacing.unit+"px 0"}}})(M);var D=function(e){function t(){return(0,r.default)(this,t),(0,u.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,o.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.mapLayers,n=e.changeLayerOrder,r=e.handleLayerVisibilty,l=e.zoomToLayerData,u=e.downloadLayer,o=e.urls,i=e.handleTableLayerChange,d=e.handleLayerOpacity,s=e.handleFeaturesTableDrawer;return L.default.createElement(w.default,{className:t.legendsPaper,elevation:0},a.length>0&&L.default.createElement(k,{useDragHandle:!0,layers:a,handleLayerVisibilty:r,zoomToLayerData:l,downloadLayer:u,urls:o,handleTableLayerChange:i,handleFeaturesTableDrawer:s,handleLayerOpacity:d,helperClass:"sortable-container",onSortEnd:n}),0==a.length&&L.default.createElement(E.Message,{message:"No Layers",align:"center",type:"body1"}))}}]),t}(L.default.Component);D.propTypes={urls:C.default.object.isRequired,classes:C.default.object.isRequired,downloadLayer:C.default.func.isRequired,handleFeaturesTableDrawer:C.default.func.isRequired,handleLayerOpacity:C.default.func.isRequired,handleTableLayerChange:C.default.func.isRequired,mapLayers:C.default.array.isRequired,changeLayerOrder:C.default.func.isRequired,handleLayerVisibilty:C.default.func.isRequired,zoomToLayerData:C.default.func.isRequired},t.default=(0,R.withStyles)(function(e){return{legendsPaper:{padding:2*e.spacing.unit}}})(D)},AwYw:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=y(a("Yz+Y")),r=y(a("iCc5")),l=y(a("V7oC")),u=y(a("FYw3")),o=y(a("mRg0")),i=y(a("1OZW")),d=y(a("0G56")),s=y(a("Sk/v")),f=y(a("SNP2")),c=y(a("/xgX")),p=y(a("C+zi")),m=y(a("17x9")),h=y(a("q1tI")),g=y(a("htac"));function y(e){return e&&e.__esModule?e:{default:e}}var b=function(e){function t(){return(0,r.default)(this,t),(0,u.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,o.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this.props,t=e.fullScreen,a=e.title,n=e.abstract,r=e.close,l=e.open;return h.default.createElement(d.default,{fullScreen:t,open:l,onClose:r},h.default.createElement(p.default,null,a),h.default.createElement(f.default,null,h.default.createElement(c.default,null,n)),h.default.createElement(s.default,null,h.default.createElement(i.default,{onClick:r,color:"primary"},"Close")))}}]),t}(h.default.Component);b.propTypes={fullScreen:m.default.bool.isRequired,title:m.default.string.isRequired,open:m.default.bool.isRequired,abstract:m.default.string,close:m.default.func.isRequired},t.default=(0,g.default)()(b)},BP9j:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=w(a("Yz+Y")),r=w(a("iCc5")),l=w(a("V7oC")),u=w(a("FYw3")),o=w(a("mRg0")),i=w(a("QGGi")),d=w(a("XImL")),s=w(a("bV9N")),f=w(a("1IiC")),c=w(a("JgXy")),p=w(a("NABS")),m=w(a("aAba")),h=w(a("4eE1")),g=a("f002"),y=w(a("17x9")),b=w(a("q1tI")),v=w(a("ueZX")),E=a("SUMQ");function w(e){return e&&e.__esModule?e:{default:e}}var C=function(e){function t(e){(0,r.default)(this,t);var a=(0,u.default)(this,(t.__proto__||(0,n.default)(t)).call(this,e));return a.handleChange=function(e){var t=a.props.map,n=e.extent.split("/").map(function(e){return parseFloat(e)});d.default.fitExtent(n,t,300)},a.state={value:""},a}return(0,o.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.bookmarks;return b.default.createElement("div",{className:a.root},n&&n.length>0&&b.default.createElement(c.default,null,n.map(function(t,n){return b.default.createElement(p.default,{key:n},b.default.createElement(i.default,null,b.default.createElement(s.default,null)),b.default.createElement("div",{className:a.bookmarkDetails},b.default.createElement(h.default,{primary:t.name,className:a.bookmarkName}),b.default.createElement(h.default,{primary:t.description,className:a.bookmarkDescription,disableTypography:!0})),b.default.createElement(m.default,null,b.default.createElement(f.default,{onClick:function(){return e.handleChange(t)},"aria-label":"Zoom To "+t.name},b.default.createElement(v.default,null))))})),(!n||0==n.length)&&b.default.createElement(g.Message,{message:"No Bookmarks",type:"caption"}))}}]),t}(b.default.Component);C.propTypes={classes:y.default.object.isRequired,bookmarks:y.default.array.isRequired,map:y.default.object.isRequired},t.default=(0,E.withStyles)(function(e){return{root:{padding:2*e.spacing.unit},bookmarkDetails:{display:"flex",flexDirection:"column"},bookmarkName:{padding:"0 16px !important"},bookmarkDescription:{fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif',fontWeight:"300",fontSize:"smaller"}}})(C)},HEer:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=m(a("Yz+Y")),r=m(a("iCc5")),l=m(a("V7oC")),u=m(a("FYw3")),o=m(a("mRg0")),i=a("f002"),d=m(a("zWwt")),s=m(a("pPbJ")),f=m(a("17x9")),c=m(a("q1tI")),p=a("SUMQ");function m(e){return e&&e.__esModule?e:{default:e}}var h=function(e){var t=e.legend;return c.default.createElement("div",{className:"full-width element-block"},c.default.createElement(i.Message,{align:"center",message:""+t.layer,type:"body1"}),c.default.createElement(d.default,{src:[t.url],loader:c.default.createElement(i.Loader,{align:"center",size:30})}))};h.propTypes={legend:f.default.object.isRequired};var g=function(e){function t(){return(0,r.default)(this,t),(0,u.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,o.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=(0,e.createLegends)();return c.default.createElement(s.default,{className:t.legendsPaper,elevation:0},a.length>0&&a.map(function(e,t){return c.default.createElement(h,{key:t,legend:e})}),0===a.length&&c.default.createElement(i.Message,{message:"No Legends",align:"center",type:"body1"}))}}]),t}(c.default.Component);g.propTypes={classes:f.default.object.isRequired,createLegends:f.default.func.isRequired},t.default=(0,p.withStyles)(function(e){return{legendsPaper:{padding:2*e.spacing.unit,textAlign:"center"}}})(g)},Nv8t:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=m(a("Yz+Y")),r=m(a("iCc5")),l=m(a("V7oC")),u=m(a("FYw3")),o=m(a("mRg0")),i=m(a("QbLZ")),d=m(a("YDiY")),s=(a("f002"),m(a("17x9"))),f=m(a("q1tI")),c=m(a("2VVu")),p=a("SUMQ");function m(e){return e&&e.__esModule?e:{default:e}}var h=function(e){function t(){return(0,r.default)(this,t),(0,u.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,o.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this.props.classes;return f.default.createElement("div",{className:e.root},f.default.createElement(d.default,{className:e.drawerHeader,position:"static"},f.default.createElement(c.default,null)))}}]),t}(f.default.Component);h.propTypes={classes:s.default.object.isRequired},t.default=(0,p.withStyles)(function(e){return{root:{width:"100%"},drawerPaper:{width:"100%"},drawerHeader:(0,i.default)({background:e.palette.primary[500],display:"flex",justifyContent:"flex-end",padding:"0 8px"},e.mixins.toolbar)}},{withTheme:!0})(h)},P5iC:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.guidGenerator=void 0;var n=m(a("Yz+Y")),r=m(a("iCc5")),l=m(a("V7oC")),u=m(a("FYw3")),o=m(a("mRg0")),i=m(a("1IiC")),d=m(a("5PQa")),s=m(a("ZuSV")),f=m(a("17x9")),c=m(a("q1tI")),p=a("SUMQ");function m(e){return e&&e.__esModule?e:{default:e}}var h=t.guidGenerator=function(){var e=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},g=function(e){function t(e){(0,r.default)(this,t);var a=(0,u.default)(this,(t.__proto__||(0,n.default)(t)).call(this,e));return a.handleClick=function(e){a.setState({anchorEl:e.currentTarget})},a.handleClose=function(){a.setState({anchorEl:null})},a.state={anchorEl:null},a.id=h(),a}return(0,o.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this.props,t=e.children,a=e.classes,n=this.state.anchorEl;return c.default.createElement("div",null,c.default.createElement(i.default,{className:a.button,"aria-label":"More","aria-owns":n?this.id:null,"aria-haspopup":"true",onClick:this.handleClick},c.default.createElement(s.default,null)),c.default.createElement(d.default,{id:this.id,anchorEl:n,open:Boolean(n),onClose:this.handleClose,PaperProps:{style:{maxHeight:150,width:200}}},t))}}]),t}(c.default.Component);g.propTypes={children:f.default.any.isRequired,classes:f.default.object.isRequired},t.default=(0,p.withStyles)(function(e){return{button:{margin:0}}})(g)},RQfP:function(e,t){},"U/ks":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=m(a("Yz+Y")),r=m(a("iCc5")),l=m(a("V7oC")),u=m(a("FYw3")),o=m(a("mRg0")),i=m(a("XImL")),d=m(a("17x9")),s=m(a("q1tI")),f=m(a("XfWh")),c=a("SUMQ"),p=m(a("vmpl"));function m(e){return e&&e.__esModule?e:{default:e}}var h=function(e){function t(e){(0,r.default)(this,t);var a=(0,u.default)(this,(t.__proto__||(0,n.default)(t)).call(this,e));return a.handleHistory=function(){var e=a.props.map;e.on("moveend",function(t){var n=t.map,r="/"+e.getView().calculateExtent(n.getSize()).join("/");a.props.match.url!==r&&a.props.history.push(r)})},a.fitHistory=function(){var e=a.props.map,t=a.props.match;if(t&&t.params.x0&&t.params.y0){var n=[parseFloat(t.params.x0),parseFloat(t.params.y0)];t.params.x1&&t.params.y1&&n.push(parseFloat(t.params.x1),parseFloat(t.params.y1)),n!==e.getView().calculateExtent()&&i.default.fitExtent(n,e)}},a}return(0,o.default)(t,e),(0,l.default)(t,[{key:"componentWillReceiveProps",value:function(e){e.loading===this.props.loading||e.loading||(this.fitHistory(),e.enableHistory&&this.handleHistory())}},{key:"componentDidMount",value:function(){this.props.map.setTarget(this.mapDiv)}},{key:"componentDidUpdate",value:function(e,t){var a=this.props.width;e.width!==a&&e.map.updateSize()}},{key:"render",value:function(){var e=this;return s.default.createElement("div",{id:"map",ref:function(t){return e.mapDiv=t},className:"map-panel"})}}]),t}(s.default.Component);h.propTypes={map:d.default.object.isRequired,classes:d.default.object.isRequired,enableHistory:d.default.bool,loading:d.default.bool.isRequired,width:d.default.string,match:d.default.object.isRequired,history:d.default.object.isRequired},t.default=(0,f.default)((0,c.withStyles)(function(e){return{}}),(0,p.default)())(h)},VNM4:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=g(a("Yz+Y")),r=g(a("iCc5")),l=g(a("V7oC")),u=g(a("FYw3")),o=g(a("mRg0")),i=g(a("ZPUd")),d=g(a("MwB+")),s=a("f002"),f=g(a("17x9")),c=g(a("q1tI")),p=g(a("bSwy")),m=g(a("TSYQ")),h=a("SUMQ");function g(e){return e&&e.__esModule?e:{default:e}}var y=function(e){function t(){var e,a,l,o;(0,r.default)(this,t);for(var i=arguments.length,d=Array(i),s=0;s<i;s++)d[s]=arguments[s];return a=l=(0,u.default)(this,(e=t.__proto__||(0,n.default)(t)).call.apply(e,[this].concat(d))),l.handleKeyPress=function(e){var t=l.props.config;"Enter"==e.key&&""!=t.searchText&&t.geocodeSearch()},o=a,(0,u.default)(l,o)}return(0,o.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.config;return c.default.createElement("div",{className:(0,m.default)("search-paper fill-out-empty",[t.paper]),elevation:1},c.default.createElement(d.default,{placeholder:"Search(Geocoding)....",onChange:a.handleGeocodingChange,className:t.textField,inputProps:{onKeyPress:this.handleKeyPress},value:a.searchText}),a.searchText&&""!==a.searchText&&c.default.createElement(p.default,{onTouchTap:function(){return a.geocodeSearch()},className:t.icon}),a.geocodingResult.length>0&&c.default.createElement(i.default,{onTouchTap:a.resetGeocoding,className:t.icon}),a.geocodeSearchLoading&&c.default.createElement(s.Loader,{size:30,thickness:3}))}}]),t}(c.default.Component);y.propTypes={classes:f.default.object.isRequired,config:f.default.shape({searchText:f.default.string.isRequired,geocodeSearch:f.default.func.isRequired,geocodeSearchLoading:f.default.bool.isRequired,handleGeocodingChange:f.default.func.isRequired,resetGeocoding:f.default.func.isRequired})},t.default=(0,h.withStyles)(function(e){return{textField:{width:"100%"},paper:{alignItems:"center",justifyContent:"center"},icon:{color:e.palette.primary.main}}})(y)},VtWp:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=g(a("Yz+Y")),r=g(a("iCc5")),l=g(a("V7oC")),u=g(a("FYw3")),o=g(a("mRg0")),i=a("q1tI"),d=g(i),s=g(a("fTbZ")),f=g(a("6V6Y")),c=a("SUMQ"),p=g(a("17x9")),m=g(a("DGHy")),h=a("Wied");function g(e){return e&&e.__esModule?e:{default:e}}(0,m.default)();var y=function(e){function t(){return(0,r.default)(this,t),(0,u.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,o.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.childrenProps;return d.default.createElement(c.MuiThemeProvider,{theme:h.theme},d.default.createElement(f.default,null,d.default.createElement("div",{className:t.root},d.default.createElement(s.default,{childrenProps:a,map:a.map}))))}}]),t}(i.Component);y.propTypes={classes:p.default.object.isRequired,childrenProps:p.default.object.isRequired},t.default=(0,c.withStyles)(function(e){return{root:{height:"100%"}}})(y)},Wied:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.theme=void 0;var n=u(a("vqLa")),r=a("SUMQ"),l=u(a("fWIC"));function u(e){return e&&e.__esModule?e:{default:e}}t.theme=(0,r.createMuiTheme)({palette:{primary:n.default,secondary:n.default,error:l.default}})},"dB5+":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=b(a("QbLZ")),r=b(a("YEIV")),l=b(a("Yz+Y")),u=b(a("iCc5")),o=b(a("V7oC")),i=b(a("FYw3")),d=b(a("mRg0")),s=b(a("1DzM")),f=b(a("ctcd")),c=b(a("n5s8")),p=b(a("17x9")),m=b(a("q1tI")),h=b(a("XdPI")),g=b(a("ZqOF")),y=a("SUMQ");function b(e){return e&&e.__esModule?e:{default:e}}var v={string:"text",double:"number",int:"number",number:"number",long:"number",boolean:"checkbox","date-time":"datetime",date:"date"},E={text:["Like","=","!="],number:["=","<=","<","!=",">",">="],datetime:["=","!=","During"],date:["=","!=","During"]},w={Like:"LIKE","=":"=","<=":"<=","<":"<","!=":"<>",">":">",">=":">=",During:"DURING"},C=function(e){function t(){var e,a,o,d;(0,u.default)(this,t);for(var s=arguments.length,f=Array(s),c=0;c<s;c++)f[c]=arguments[c];return a=o=(0,i.default)(this,(e=t.__proto__||(0,l.default)(t)).call.apply(e,[this].concat(f))),o.handleChange=function(e){o.setState((0,r.default)({},e.target.name,e.target.value))},o.resetForm=function(){o.setState({value:"",op:"",attribute:""})},o.handleSubmit=function(e){e.preventDefault()},o.getAttributeType=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1],a=null,n=0;n<e.length;n++){var r=e[n];if(r.name===t){a=r.type.split(":").pop();break}}return a},o.getSupportedFilters=function(){var e=o.props,t=e.attributes,a=e.filter.attribute,n=o.getAttributeType(t,a),r=v[n]||"text";return E[r]||[]},o.getValueFieldProps=function(){var e=o.props,t=e.attributes,a=e.filter.attribute,n=o.getAttributeType(t,a),r=v[n],l={};return"date"===r?l.type="date":"datetime"===r&&(l.type="datetime-local"),l},o.getTextInput=function(){var e=o.props,t=e.attributes,a=e.classes,r=e.handleFilterChange,l=e.filter,u=l.attribute,i=l.value,d=l.op,s=l.start,f=l.end,c=o.getAttributeType(t,u),p=v[c],h=m.default.createElement(g.default,(0,n.default)({},o.getValueFieldProps(),{id:"value",required:!0,error:!i,label:"Value",InputProps:{name:"value"},className:a.textField,value:i,onChange:r,margin:"normal"}));return"date"!==p&&"datetime"!==p||"DURING"!==d||(h=[m.default.createElement(g.default,(0,n.default)({key:"start"},o.getValueFieldProps(),{id:"start",required:!0,error:!s,label:"start",InputProps:{name:"start"},className:a.textField,value:s,onChange:r,margin:"normal"})),m.default.createElement(g.default,(0,n.default)({key:"end"},o.getValueFieldProps(),{id:"end",required:!0,error:!f,label:"end",InputProps:{name:"end"},className:a.textField,value:f,onChange:r,margin:"normal"}))]),h},d=a,(0,i.default)(o,d)}return(0,d.default)(t,e),(0,o.default)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.attributes,n=t.classes,r=t.handleFilterChange,l=t.filter;return m.default.createElement("form",{className:n.form,onSubmit:this.handleSubmit,autoComplete:"off"},m.default.createElement(s.default,{className:n.formControl,error:!l.attribute},m.default.createElement(f.default,{htmlFor:"layer-select"},"Attribute"),m.default.createElement(h.default,{value:l.attribute,onChange:r,inputProps:{name:"attribute",id:"attribute-select"},autoWidth:!0},m.default.createElement(c.default,{value:""},m.default.createElement("em",null,"None")),a.map(function(e,t){return m.default.createElement(c.default,{key:t,value:e.name},e.name)}))),m.default.createElement(s.default,{className:n.formControl,error:!l.op},m.default.createElement(f.default,{htmlFor:"layer-select"},"Operation"),m.default.createElement(h.default,{value:l.op,onChange:r,inputProps:{name:"op",id:"op-select"},autoWidth:!0},m.default.createElement(c.default,{value:""},m.default.createElement("em",null,"None")),this.getSupportedFilters().map(function(e,t){return m.default.createElement(c.default,{key:t,value:w[e]},e)}))),this.getTextInput(),m.default.createElement("button",{ref:function(t){return e.formSubmit=t},type:"submit",hidden:!0}))}}]),t}(m.default.Component);C.propTypes={classes:p.default.object.isRequired,attributes:p.default.array.isRequired,filter:p.default.object.isRequired,handleFilterChange:p.default.func.isRequired},t.default=(0,y.withStyles)(function(e){return{formControl:{margin:e.spacing.unit,minWidth:120},root:{display:"flex",flexWrap:"wrap"},textField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit},form:{display:"flex",flexDirection:"column"}}})(C)},f002:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Message=t.Loader=void 0;var n=i(a("DKSo")),r=i(a("zEnc")),l=i(a("17x9")),u=i(a("q1tI")),o=i(a("6ZaM"));function i(e){return e&&e.__esModule?e:{default:e}}(t.Loader=function(e){var t=e.size,a=e.thickness,l=e.align,o=e.type;return u.default.createElement("div",{className:"text-"+(l||"center")},(void 0===o||"circle"===o)&&u.default.createElement(n.default,{size:t||50,thickness:a||5,className:"text-center"}),"line"===o&&u.default.createElement(r.default,{size:t||50,thickness:a||5,className:"text-center"}))}).propTypes={size:l.default.number,thickness:l.default.number,align:l.default.string,type:l.default.string},(t.Message=function(e){var t=e.align,a=e.type,n=e.message,r=e.color,l=e.noWrap;return u.default.createElement(o.default,{variant:a,align:t||"center",noWrap:void 0!==l?l:n.length>70,color:r||"inherit",className:"element-flex"},n)}).propTypes={type:l.default.string.isRequired,message:l.default.string.isRequired,align:l.default.string,color:l.default.string,noWrap:l.default.bool}},fTbZ:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CartoviewSnackBar=void 0;var n=k(a("Yz+Y")),r=k(a("iCc5")),l=k(a("V7oC")),u=k(a("FYw3")),o=k(a("mRg0")),i=k(a("QbLZ")),d=k(a("YEIV")),s=a("eO8H"),f=a("q1tI"),c=k(f),p=k(a("/rak")),m=k(a("hXeh")),h=k(a("qTMg")),g=k(a("yBWx")),y=k(a("tzQh")),b=k(a("VNM4")),v=k(a("3ZzI")),E=k(a("1IiC")),w=a("f002"),C=k(a("U/ks")),T=k(a("uniG")),S=k(a("pPbJ")),L=k(a("17x9")),P=k(a("MPIl")),x=k(a("xBje")),R=k(a("TSYQ")),F=k(a("XfWh")),_=a("SUMQ"),q=k(a("vmpl"));function k(e){return e&&e.__esModule?e:{default:e}}var M=function(e){var t=e.message;return c.default.createElement("span",{className:"element-flex",id:"message-id"},c.default.createElement(w.Loader,{size:20,thickness:4})," ",t," ")};M.propTypes={message:L.default.string.isRequired};var D=t.CartoviewSnackBar=function(e){var t=e.handleClose,a=e.open,n=e.message,r=c.default.createElement(M,{message:n});return c.default.createElement(x.default,{open:a,onClose:t||function(){},ContentProps:{"aria-describedby":"message-id"},message:r})};function N(e){return c.default.createElement(P.default,(0,i.default)({direction:"left"},e))}D.propTypes={handleClose:L.default.func,open:L.default.bool.isRequired,message:L.default.string.isRequired};var I=function(e){function t(){var e,a,l,o;(0,r.default)(this,t);for(var i=arguments.length,d=Array(i),s=0;s<i;s++)d[s]=arguments[s];return a=l=(0,u.default)(this,(e=t.__proto__||(0,n.default)(t)).call.apply(e,[this].concat(d))),l.geoCodingProps=function(){var e=l.props.childrenProps;return{searchText:e.searchText,geocodeSearchLoading:e.geocodeSearchLoading,geocodeSearch:e.geocodeSearch,resetGeocoding:e.resetGeocoding,geocodingResult:e.geocodingResult,handleGeocodingChange:e.handleGeocodingChange}},l.getDrawerProps=function(){var e=l.props.childrenProps;return{setThumbnail:e.setThumbnail,thumbnailSaving:e.thumbnailSaving,map:e.map,resetTablePagination:e.resetTablePagination,handleFeaturesTableDrawer:e.handleFeaturesTableDrawer,exportMap:e.exportMap,config:e.config,handleLayerVisibilty:e.handleLayerVisibilty,changeLayerOrder:e.changeLayerOrder,mapLayers:e.mapLayers,handleLayerOpacity:e.handleLayerOpacity,downloadLayer:e.downloadLayer,urls:e.urls,createLegends:e.createLegends,handleTableLayerChange:e.handleTableLayerChange,baseMaps:e.baseMaps,handleBaseMapVisibilty:e.handleBaseMapVisibilty,handlePrintModal:e.handlePrintModal,zoomToLayerData:e.zoomToLayerData}},l.getFeatureTableDrawerProps=function(){var e=l.props.childrenProps;return{attributes:e.layerAttributes,wfsService:e.wfsService,resetTablePagination:e.resetTablePagination,combinationType:e.combinationType,handleCombinationType:e.handleCombinationType,getFeatureTableData:e.getFeatureTableData,tableLayer:e.tableLayer,handleTableLayerChange:e.handleTableLayerChange,loading:e.featuresIsLoading,mapLayers:e.mapLayers,hanldeDrawerOpen:e.handleFeaturesTableDrawer,drawerOpen:e.featuresTableOpen,createQueryPanel:e.createQueryPanel,removeComponent:e.removeComponent,filters:e.filters,handleFilterChange:e.handleFilterChange,resetQuery:e.resetQuery}},l.getFeatureTableProps=function(){var e=l.props.childrenProps;return{handlePageChange:e.handlePageChange,handleRowsPerPage:e.handleRowsPerPage,page:e.page,rowsPerPage:e.rowsPerPage,getFeatureTableData:e.getFeatureTableData,totalFeatures:e.totalFeatures,searchEnabled:e.searchEnabled,resetFeatureCollection:e.resetFeatureCollection,addStyleToFeature:e.addStyleToFeature,loading:e.featuresIsLoading,zoomToFeature:e.zoomToFeature,features:e.features,resetQuery:e.resetQuery}},o=a,(0,u.default)(l,o)}return(0,o.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e,t=this.props,a=t.classes,n=t.childrenProps;return c.default.createElement("div",{className:a.root},c.default.createElement("div",{className:(0,R.default)((e={},(0,d.default)(e,a.drawer,!!n.drawerOpen),(0,d.default)(e,a.drawerClose,!n.drawerOpen),e))},c.default.createElement(S.default,{className:(0,R.default)(a.DrawerBar,(0,d.default)({},a.DrawerOpenBar,n.drawerOpen))},c.default.createElement("div",{className:"element-flex "},c.default.createElement(E.default,{onTouchTap:n.toggleDrawer,color:"default","aria-label":"Open Menu"},c.default.createElement(T.default,null)),c.default.createElement(b.default,{config:this.geoCodingProps()})),!n.geocodeSearchLoading&&n.geocodingResult.length>0&&c.default.createElement(y.default,{resetGeocoding:n.resetGeocoding,action:n.zoomToExtent,geocodingResult:n.geocodingResult,geocodeSearchLoading:n.geocodeSearchLoading,boundlessGeoCodingEnabled:n.config.boundlessGeoCodingEnabled}),"                    "),c.default.createElement(N,{in:n.drawerOpen,direction:"right"},c.default.createElement(p.default,(0,i.default)({},this.getDrawerProps(),{className:(0,R.default)((0,d.default)({},a.drawerContentClose,!n.drawerOpen))})))),c.default.createElement(v.default,{className:a.root,container:!0,alignItems:"stretch",spacing:0},c.default.createElement(v.default,{item:!0,xs:12,sm:12,md:12,lg:12,xl:12},c.default.createElement(s.HashRouter,null,c.default.createElement(s.Route,{exact:!0,path:"/:x0?/:y0?/:x1?/:y1?",render:function(e){return c.default.createElement(C.default,(0,i.default)({loading:n.mapIsLoading},e,{enableHistory:n.config.enableHistory,map:n.map}))}})),n.mapLayers.length>0&&n.config.enableFeatureTable&&c.default.createElement(h.default,this.getFeatureTableDrawerProps(),c.default.createElement(g.default,this.getFeatureTableProps())),c.default.createElement(m.default,n))),c.default.createElement(D,{open:n.featureIdentifyLoading,message:"Searching For Features at this Point"}))}}]),t}(f.Component);I.propTypes={childrenProps:L.default.object.isRequired,classes:L.default.object.isRequired,width:L.default.string},t.default=(0,F.default)((0,_.withStyles)(function(e){var t,a;return{root:{height:"100%"},drawer:(0,d.default)({width:"30%",height:"100%",zIndex:"1150",position:"fixed"},e.breakpoints.down("md"),{width:"90%"}),drawerClose:{width:"0%",height:"100%",zIndex:"1150",position:"fixed"},drawerContentClose:{display:"none"},drawerContainer:{left:"0px !important"},DrawerBar:(t={width:"28%",zIndex:"12",display:"flex",flexDirection:"column",position:"fixed",top:"1%"},(0,d.default)(t,e.breakpoints.down("md"),{width:"88%",top:".5%"}),(0,d.default)(t,"left","1%"),t),DrawerOpenBar:(a={width:"97% !important",zIndex:"12",display:"flex",flexDirection:"column",position:"absolute",top:"1%"},(0,d.default)(a,e.breakpoints.down("md"),{top:".5%"}),(0,d.default)(a,"left","1%"),a)}}),(0,q.default)())(I)},hXeh:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=R(a("YEIV")),r=R(a("Yz+Y")),l=R(a("iCc5")),u=R(a("V7oC")),o=R(a("FYw3")),i=R(a("mRg0")),d=R(a("GQeE"));a("t2f6");var s=R(a("CarD")),f=R(a("8C4M")),c=R(a("1OZW")),p=R(a("ZPUd")),m=R(a("1IiC")),h=a("f002"),g=R(a("pPbJ")),y=R(a("17x9")),b=R(a("q1tI")),v=R(a("NeRm")),E=R(a("nzuV")),w=R(a("1TCx")),C=R(a("QUaF")),T=R(a("nwgO")),S=R(a("6ZaM")),L=R(a("ueZX")),P=R(a("TSYQ")),x=a("SUMQ");function R(e){return e&&e.__esModule?e:{default:e}}var F=function(e){return{root:{width:"100%",maxWidth:360,backgroundColor:e.palette.background.paper,position:"relative",overflow:"auto",maxHeight:300},button:{height:"auto"},titlePanel:{backgroundColor:e.palette.primary[500],borderColor:"#777777"},content:{backgroundColor:e.palette.background.paper},table:{display:"block",width:"100%",overflowX:"auto"},tableRow:{display:"flex",width:"100%",flexGrow:"1",height:"auto !important",flexBasis:"0","&:nth-of-type(odd)":{backgroundColor:e.palette.background.default}},tableCell:{flex:".5",alignItems:"center",padding:e.spacing.unit+"px !important",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}}},_=(0,x.withStyles)(F)(function(e){var t=e.currentFeature,a=e.classes;return b.default.createElement(v.default,{className:a.table},b.default.createElement(E.default,{className:a.table},(0,d.default)(t.getProperties()).map(function(e,n){if("geometry"!=e&&"_layerTitle"!==e&&"_attributesAlias"!==e&&"_layerName"!==e){var r=t.getProperties()._attributesAlias,l=r&&r[e]||e;return b.default.createElement(C.default,{classes:{root:a.tableRow},key:n},b.default.createElement(w.default,{classes:{body:a.tableCell}},""+l),b.default.createElement(w.default,{classes:{body:a.tableCell}},b.default.createElement(T.default,{id:"tooltip-top",title:""+t.getProperties()[e],placement:"top"},b.default.createElement("span",null,""+t.getProperties()[e]))))}})))});_.propTypes={currentFeature:y.default.object.isRequired};var q=function(e){function t(){var e,a,n,u;(0,l.default)(this,t);for(var i=arguments.length,d=Array(i),s=0;s<i;s++)d[s]=arguments[s];return a=n=(0,o.default)(this,(e=t.__proto__||(0,r.default)(t)).call.apply(e,[this].concat(d))),n.state={currentFeature:null},n.ensureEvents=function(){var e=n.props,t=e.resetFeatureCollection,a=e.changeShowPopup,r=e.nextFeature,l=e.previousFeature,u=e.zoomToFeature,o=n,i=o.popupCloser,d=o.nextButton,s=o.prevButton,f=o.zoomToButton;null===i.onclick&&(i.onclick=function(){return t(),a(),!1}),null===d.onclick&&(d.onclick=function(){r()}),null===s.onclick&&(s.onclick=function(){l()}),null===f.onclick&&(f.onclick=function(){var e=n.state.currentFeature;u(e)})},u=a,(0,o.default)(n,u)}return(0,i.default)(t,e),(0,u.default)(t,[{key:"componentWillReceiveProps",value:function(e){var t=this,a=this.props.addOverlay,n=e.featureIdentifyResult,r=e.activeFeature;if(e.showPopup){this.node.style.display="block";var l=n.length>0?n[r]:null;this.setState({currentFeature:l},function(){return a(t.node)}),this.ensureEvents()}else this.node.style.display="none"}},{key:"render",value:function(){var e=this,t=this.props,a=t.featureIdentifyResult,r=t.featureIdentifyLoading,l=t.activeFeature,u=t.classes,o=a.length>0&&l!=a.length-1,i=a[l];return b.default.createElement("div",{ref:function(t){return e.node=t},id:"popup",className:"ol-popup-cartoview"},b.default.createElement(g.default,{elevation:2},b.default.createElement("div",{className:(0,P.default)("title-panel",(0,n.default)({},u.titlePanel,!0))},0!=a.length&&b.default.createElement(S.default,{type:"body1",align:"left",noWrap:!0,color:"default",className:"element-flex title-text"},"Layer : "+i.get("_layerTitle")),b.default.createElement(m.default,{color:"default",className:(0,P.default)((0,n.default)({hidden:0===l,visible:0!=l,"popup-buttons":!0},u.button,!0)),buttonRef:function(t){return e.prevButton=t},"aria-label":"Delete"},b.default.createElement(s.default,null)),b.default.createElement(m.default,{color:"default",className:(0,P.default)((0,n.default)({hidden:!o,visible:o,"popup-buttons":!0},u.button,!0)),buttonRef:function(t){return e.nextButton=t},"aria-label":"Delete"},b.default.createElement(f.default,null)),b.default.createElement(m.default,{color:"default",buttonRef:function(t){return e.popupCloser=t},className:u.button,"aria-label":"Delete"},b.default.createElement(p.default,null))),b.default.createElement("div",{className:(0,P.default)("cartoview-popup-content",(0,n.default)({},u.content,!0))},a.length>0&&b.default.createElement("div",null,b.default.createElement(_,{currentFeature:i})),0==a.length&&!r&&b.default.createElement(h.Message,{message:"No Features at this Point",type:"subheading"})),b.default.createElement("div",{className:"cartoview-popup-actions center"},b.default.createElement("div",{ref:function(t){e.zoomToButton=t}},0!=a.length&&!r&&b.default.createElement(c.default,{color:"default",className:u.button,dense:"true"},b.default.createElement(L.default,null),b.default.createElement(S.default,{type:"caption",align:"left",noWrap:!1,color:"inherit"},"Zoom To Feature"))))))}}]),t}(b.default.Component);q.propTypes={resetFeatureCollection:y.default.func.isRequired,zoomToFeature:y.default.func.isRequired,addOverlay:y.default.func.isRequired,changeShowPopup:y.default.func.isRequired,addStyleToFeature:y.default.func.isRequired,nextFeature:y.default.func.isRequired,previousFeature:y.default.func.isRequired,featureIdentifyResult:y.default.array.isRequired,featureIdentifyLoading:y.default.bool.isRequired,showPopup:y.default.bool.isRequired,activeFeature:y.default.number.isRequired,map:y.default.object.isRequired,classes:y.default.object.isRequired},t.default=(0,x.withStyles)(F)(q)},qTMg:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=C(a("Yz+Y")),r=C(a("iCc5")),l=C(a("V7oC")),u=C(a("FYw3")),o=C(a("mRg0")),i=a("q1tI"),d=C(i),s=C(a("ZPUd")),f=C(a("EHL7")),c=C(a("ekFh")),p=C(a("1DzM")),m=C(a("1IiC")),h=C(a("ctcd")),g=a("f002"),y=C(a("pPbJ")),b=C(a("17x9")),v=C(a("vmk0")),E=C(a("XdPI")),w=a("SUMQ");function C(e){return e&&e.__esModule?e:{default:e}}var T=function(e){function t(){return(0,r.default)(this,t),(0,u.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,o.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this.props,t=e.drawerOpen,a=e.classes,n=e.resetTablePagination,r=e.hanldeDrawerOpen,l=e.mapLayers,u=e.children,o=e.createQueryPanel,i=e.removeComponent,b=e.filters,w=e.loading,C=e.combinationType,T=e.handleCombinationType,S=e.tableLayer,L=e.handleTableLayerChange,P=e.getFeatureTableData,x=e.handleFilterChange,R=e.resetQuery,F=e.attributes;return d.default.createElement(c.default,{variant:"persistent",classes:{paper:a.drawerPaper},open:t,anchor:"bottom"},d.default.createElement(m.default,{onClick:r,color:"primary",className:a.button,"aria-label":"Close"},d.default.createElement(s.default,null)),d.default.createElement(f.default,null),d.default.createElement("div",null,d.default.createElement(y.default,{elevation:0,className:a.query},d.default.createElement("div",{className:a.layerSelector},d.default.createElement(p.default,{className:a.formControl},d.default.createElement(h.default,{htmlFor:"layer-select"},"Layer"),d.default.createElement(E.default,{native:!0,onChange:L,value:S,inputProps:{id:"layer-select"}},l.map(function(e,t){return d.default.createElement("option",{key:t,value:e.get("name")},e.get("name"))}))),d.default.createElement(p.default,{className:a.formControl},d.default.createElement(h.default,{htmlFor:"filters-match-select"},"Filters Matching"),d.default.createElement(E.default,{native:!0,onChange:T,value:C,inputProps:{id:"filters-match-select"}},d.default.createElement("option",{value:"any"},"Any"),d.default.createElement("option",{value:"all"},"All")))),d.default.createElement("div",{className:a.queryPanel},d.default.createElement(v.default,{handleFilterChange:x,filters:b,createQueryPanel:o,removeComponent:i,resetTablePagination:n,attributes:F,getFeatureTableData:P,resetQuery:R})),u)),w&&d.default.createElement(g.Loader,null))}}]),t}(i.Component);T.propTypes={classes:b.default.object.isRequired,drawerOpen:b.default.bool.isRequired,hanldeDrawerOpen:b.default.func.isRequired,resetTablePagination:b.default.func.isRequired,children:b.default.node,mapLayers:b.default.array.isRequired,loading:b.default.bool.isRequired,tableLayer:b.default.string.isRequired,attributes:b.default.array.isRequired,handleTableLayerChange:b.default.func.isRequired,getFeatureTableData:b.default.func.isRequired,createQueryPanel:b.default.func.isRequired,removeComponent:b.default.func.isRequired,filters:b.default.array.isRequired,handleFilterChange:b.default.func.isRequired,resetQuery:b.default.func.isRequired,combinationType:b.default.string.isRequired,handleCombinationType:b.default.func.isRequired},t.default=(0,w.withStyles)(function(e){return{drawerPaper:{height:"40%",width:"100%"},formControl:{margin:e.spacing.unit,minWidth:120},expansion:{padding:0},closeButton:{display:"flex",justifyContent:"flex-end"},layerSelector:{display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"center"},queryPanel:{display:"flex",flexDirection:"row",flexWrap:"wrap"},button:{margin:e.spacing.unit},query:{width:"100%",height:"100%",display:"block"},drawerHeader:e.mixins.toolbar}})(T)},qnMZ:function(e,t,a){"use strict";(function(e){var t=M(a("m1cH")),n=M(a("QbLZ")),r=M(a("Yz+Y")),l=M(a("iCc5")),u=M(a("V7oC")),o=M(a("FYw3")),i=M(a("mRg0"));a("W8A/"),a("RQfP"),a("1LhQ"),a("bZMm"),a("201c");var d=a("4AS+"),s=a("SrVH"),f=M(s),c=a("q1tI"),p=M(c),m=a("Yvh9"),h=M(a("L1mC")),g=M(a("VtWp")),y=M(a("XImL")),b=M(a("CUE8")),v=M(a("FpwN")),E=M(a("pcsQ")),w=M(a("wGZG")),C=M(a("UoGI")),T=M(a("17x9")),S=M(a("GB6V")),L=M(a("YVZI")),P=M(a("5nHY")),x=M(a("At+4")),R=M(a("gJz9")),F=a("Nxrd"),_=M(a("JW8z")),q=M(a("p5/s")),k=a("i8i4");function M(e){return e&&e.__esModule?e:{default:e}}var D={string:"text",double:"number",int:"number",number:"number",long:"number",boolean:"checkbox","date-time":"datetime",date:"date"};_.default.setProj4(q.default);var N=function(t){function a(t){(0,l.default)(this,a);var n=(0,o.default)(this,(a.__proto__||(0,r.default)(a)).call(this,t));I.call(n);var u=n.props,i=u.urls;u.config;return n.state={mapIsLoading:!0,drawerOpen:!1,featureIdentifyLoading:!1,activeFeature:0,mouseCoordinates:[0,0],featureIdentifyResult:[],layerAttributes:[],searchEnabled:!1,attributesLoading:!1,showPopup:!1,thumbnailSaving:!1,identifyEnabled:!0,geocodingResult:[],searchText:"",geocodeSearchLoading:!1,featureCollection:new b.default,map:y.default.getMap(),mapLayers:[],combinationType:"any",selectedRegion:"",baseMaps:[],filters:[],features:[],totalFeatures:0,featuresIsLoading:!1,featuresTableOpen:!1,tableLayer:"",page:0,rowsPerPage:25,printOpened:!1,mapJson:null},e.map=n.state.map,n.styleHelper=new S.default,n.urls=new L.default(i.proxy),n.wfsService=new R.default(i.wfsURL,i.proxy),n.initGeocoding(),n}return(0,i.default)(a,t),(0,u.default)(a,[{key:"initGeocoding",value:function(){var e=null,t=null,a=this.props.config;a.boundlessGeoCodingEnabled?(e=d.BOUNDLESS_GEOCODING_URL,t=(0,n.default)({},d.BOUNDLESS_SETTINGS,{apikey:a.geocodingKey||""})):(e=d.ESRI_GEOCODING_URL,t=(0,n.default)({},d.ESRI_SETTINGS)),this.geocoding=new d.Geocoding(e,t)}},{key:"componentWillMount",value:function(){var e=this,t=this.state.map,a=this.props,n=a.urls,r=a.config;this.overlay=new C.default({autoPan:!0,autoPanAnimation:{duration:250},positioning:"center-center"}),t.addOverlay(this.overlay),this.addSelectionLayer(),(0,m.doGet)(n.mapJsonUrl).then(function(t){return e.setState({mapJson:t})}),y.default.mapInit(n.mapJsonUrl,t,n.proxy,r.token,this.mapLoaded)}},{key:"componentDidMount",value:function(){this.singleClickListner()}},{key:"setLayerSwitcherLayers",value:function(e){var t=this,a=this.state.tableLayer,n=[],r=[];e.map(function(e){e instanceof E.default?e instanceof E.default&&"base-group"===e.get("type")&&e.getLayers().getArray().map(function(e){return r.push(e)}):n.push(e)});var l={mapLayers:n.slice(0).reverse(),baseMaps:r};l.mapLayers.length>0&&(!a||""!==a)&&(l.tableLayer=l.mapLayers[0].get("name"),this.getFeatureTableData(0,25,l.tableLayer)),this.setState(l,function(){t.createLegends(),t.getTableLayerAttributes()})}},{key:"render",value:function(){return p.default.createElement(g.default,{childrenProps:this.getChildrenProps()})}}]),a}(c.Component),I=function(){var e=this;this.getMapJsonLayer=function(t){var a=null,n=e.state.mapJson;if(n&&n.map)for(var r=n.map.layers,l=0;l<r.length;l++){var u=r[l];if(u.name===t){a=u;break}}return a},this.getLayerDataExtent=function(t){var a=null,n=e.state.map.getView().getProjection().getCode(),r=e.getMapJsonLayer(t);r&&(a=r.capability.bbox[n]);return a},this.handleLayerOpacity=function(t){return function(a){var n=e.state.mapLayers;n[t].setOpacity(a),e.setState({mapLayers:n})}},this.createQueryPanel=function(){var a=e.state.filters,n={op:"",value:"",start:(new Date).toISOString(),end:(new Date).toISOString(),attribute:""};e.setState({filters:[].concat((0,t.default)(a),[n])})},this.removeComponent=function(t){var a=e.state.filters;a.splice(t,1),e.setState({filters:a})},this.resetQuery=function(){e.state.filters.length>0&&e.setState({filters:[]},function(){e.getFeatureTableData(0,25,e.state.tableLayer,!1)})},this.handleFilterChange=function(t){return function(a){var n=e.state.filters;if(t<n.length){var r=n;r[t][a.target.name]=a.target.value,e.setState({filters:r})}}},this.handlePageChange=function(t,a){e.setState({page:a},function(){e.getFeatureTableData(e.state.page*e.state.rowsPerPage,e.state.rowsPerPage)})},this.handleRowsPerPage=function(t){e.setState({rowsPerPage:t.target.value},function(){e.getFeatureTableData(e.state.page*e.state.rowsPerPage,e.state.rowsPerPage)})},this.handlePrintModal=function(){e.setState({printOpened:!e.state.printOpened})},this.handleFeaturesTableDrawer=function(){var t=e.state.featuresTableOpen;e.setState({featuresTableOpen:!t})},this.handleCombinationType=function(t){var a=t.target.value;a!==e.state.combinationType&&e.setState({combinationType:a})},this.capitalize=function(e){return e&&e[0].toUpperCase()+e.slice(1)},this.resetTablePagination=function(){e.setState({page:0,rowsPerPage:25})},this.handleNonDownload=function(t){var a=e.props.urls,n=e.urls.getProxiedURL(a.wfsURL);(0,m.doPost)(n,t).then(function(t){var a={features:s.wmsGetFeatureInfoFormats["application/json"].readFeatures(t),featuresIsLoading:!1,totalFeatures:t.totalFeatures};e.setState(a)})},this.handleDownloadFiltered=function(t){var a=e.state.tableLayer,n=e.props.urls,r=e.urls.getProxiedURL(n.wfsURL);(0,m.downloadFile)(r,a.split(":").pop()+".zip",t)},this.isValid=function(e){var t=e.value,a=e.attribute,n=e.op,r=e.start,l=e.end,u=!1;return"DURING"!==n?t&&a&&n&&(u=!0):r&&l&&a&&n&&(u=!0),u},this.getAttributeType=function(t){for(var a=e.state.layerAttributes,n=null,r=0;r<a.length;r++){var l=a[r];if(l.name===t){n=l.type.split(":").pop();break}}return n},this.getFilterObj=function(t){var a=e.getAttributeType(e.state.attribute),n=D[a],r=t.value,l=t.attribute,u=t.op,o=t.start,i=t.end;if(e.isValid(t))return"DURING"===u?{attribute:l,operator:u,value:r,start:new Date(o).toISOString(),end:new Date(i).toISOString()}:"date"===n||"datetime"===n?{attribute:l,operator:u,value:new Date(o).toISOString()}:{attribute:l,operator:u,value:r}},this.getFeatureTableData=function(t,a){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,l=arguments.length>3&&void 0!==arguments[3]&&arguments[3],u=e.state,o=u.filters,i=u.map,d=u.combinationType,s=[];if(o.map(function(t){e.isValid(t)&&s.push(e.getFilterObj(t))}),r||(r=e.state.tableLayer),r){var f={filters:s};l?f=(0,n.default)({},f,{outputFormat:"shape-zip"}):(e.setState({featuresIsLoading:!0,searchEnabled:!!s}),f=(0,n.default)({},f,{combinationType:d,maxFeatures:a,startIndex:t,pagination:!0,outputFormat:"application/json"})),e.wfsService.writeWFSGetFeature(i,r,f).then(function(t){var a=(new XMLSerializer).serializeToString(t);l?e.handleDownloadFiltered(a):e.handleNonDownload(a)})}},this.setThumbnail=function(){var t=e.state.map,a=e.props.urls;e.setState({thumbnailSaving:!0},function(){y.default.setThumbnail(t,a.thumbnailURL).then(function(t){e.setState({thumbnailSaving:!1},alert(t))})})},this.resetGeocoding=function(){e.setState({geocodingResult:[],searchText:""})},this.handleGeocodingChange=function(t){var a={searchText:t.target.value};""==t.target.value&&(a.geocodingResult=[]),e.setState(a)},this.getTableLayerAttributes=function(){var t=e.state.tableLayer;e.setState({attributesLoading:!0}),e.wfsService.describeFeatureType(t).then(function(t){var a={attributesLoading:!1};t.featureTypes.length>0&&(a.layerAttributes=t.featureTypes[0].properties.filter(function(e){return"the_geom"!==e.name})),e.setState(a)})},this.handleTableLayerChange=function(t){var a=t.target.value,n=e.state.tableLayer;a!==n&&e.setState({tableLayer:t.target.value,features:[],page:0,rowsPerPage:25},function(){e.getTableLayerAttributes(),e.getFeatureTableData(0,25,a)})},this.toggleDrawer=function(){var t=e.state.drawerOpen;e.setState({drawerOpen:!t})},this.geocodeSearch=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};e.setState({geocodeSearchLoading:!0});var n=e.state.searchText;e.geocoding.search(t||n,function(t){e.setState({geocodeSearchLoading:!1,geocodingResult:t}),a(t)})},this.addOverlay=function(t){var a=e.state,n=a.activeFeature,r=a.featureIdentifyResult,l=a.mouseCoordinates;if(r.length>0){var u=r[n].getGeometry();l=f.default.getGeometryCenter(u)}e.overlay.setElement(t),e.overlay.setPosition(l)},this.changeShowPopup=function(){var t=e.state.showPopup;e.setState({showPopup:!t})},this.mapLoaded=function(){var t=e.state.map.getLayers().getArray();e.setLayerSwitcherLayers(t),e.setState({mapIsLoading:!1})},this.addSelectionLayer=function(){var t=e.state,a=t.featureCollection,n=t.map,r=new x.default({features:a});new P.default({source:r,style:e.styleHelper.styleFunction,title:"Selected Features",zIndex:1e4,format:new v.default({defaultDataProjection:n.getView().getProjection(),featureProjection:n.getView().getProjection()}),map:n}),r.on("addfeature",function(e){h.default.flash(e.feature,n)})},this.downloadLayer=function(t){var a=e.props.config,n=e.wfsService.buildGetFeatureURL(t,void 0,void 0,void 0,void 0,void 0,"shape-zip",a.token);(0,m.downloadFile)(n,t+".zip")},this.handleBaseMapVisibilty=function(t,a){var n=e.state.baseMaps;n.map(function(e){a===e.get("id")?e.setVisible(!0):e.setVisible(!1)}),e.setState({baseMaps:n})},this.zoomToFeature=function(t){var a=e.state.map;e.addStyleToFeature([t]),y.default.fitExtent(t.getGeometry().getExtent(),a,400)},this.zoomToLocation=function(t){var a=e.state.map;y.default.zoomToLocation(t,a)},this.zoomToExtent=function(t){var a=e.state.map;y.default.fitExtent(y.default.reprojectExtent(t,a),a)},this.handleLayerVisibilty=function(t){return function(a,n){var r=e.state.mapLayers;r[t].setVisible(n),e.setState({mapLayers:r})}},this.changeLayerOrder=function(t){var a=t.oldIndex,n=t.newIndex,r=e.state.mapLayers,l=(0,F.arrayMove)(r,a,n);l.map(function(e,t){e.setZIndex(r.length-t)}),e.setState({mapLayers:l})},this.singleClickListner=function(){var t=e.state.map;t.on("singleclick",function(a){e.overlay&&e.overlay.setElement(void 0),e.setState({mouseCoordinates:a.coordinate,featureIdentifyLoading:!0,activeFeature:0,featureIdentifyResult:[],showPopup:!1}),e.featureIdentify(t,a.coordinate)})},this.createLegends=function(){var t=e.state.mapLayers,a=e.props,n=a.config,r=a.urls,l=[];return t.map(function(e){var t=e.getProperties().title;e.getVisible()&&l.push({layer:t,url:w.default.getLegendURL(e,n.token,r.proxy)})}),l},this.resetFeatureCollection=function(){e.state.featureCollection.clear()},this.addStyleToFeature=function(t){var a=e.state.featureCollection;e.resetFeatureCollection(),t&&t.length>0&&a.extend(t)},this.zoomToLayerData=function(t){var a=e.getLayerDataExtent(t);if(a){var n=e.state.map;y.default.fitExtent(a.bbox,n)}},this.featureIdentify=function(t,a){var n=e.props,r=n.urls,l=n.config;f.default.featureIdentify(t,a,r.proxy,l.token,r.layerAttributes).then(function(t){e.setState({featureIdentifyLoading:!1,featureIdentifyResult:t,activeFeature:0,showPopup:!0},function(){return e.addStyleToFeature(t)})}).catch(function(t){e.setState({featureIdentifyLoading:!1},alert(t.text()))})},this.addStyleToCurrentFeature=function(){var t=e.state,a=t.activeFeature,n=t.featureIdentifyResult;e.addStyleToFeature([n[a]])},this.nextFeature=function(){var t=e.state.activeFeature+1;e.setState({activeFeature:t},e.addStyleToCurrentFeature)},this.previousFeature=function(){var t=e.state.activeFeature-1;e.setState({activeFeature:t},e.addStyleToCurrentFeature)},this.exportMap=function(){var t=e.state.map;y.default.exportMap(t)},this.getChildrenProps=function(){var t=e.props,a=t.config,r=t.urls;return(0,n.default)({config:a},e.state,{handlePrintModal:e.handlePrintModal,downloadLayer:e.downloadLayer,zoomToFeature:e.zoomToFeature,addStyleToFeature:e.addStyleToFeature,resetFeatureCollection:e.resetFeatureCollection,layerName:w.default.layerName,layerNameSpace:w.default.layerNameSpace,toggleDrawer:e.toggleDrawer,urls:r,handleFilterChange:e.handleFilterChange,handleCombinationType:e.handleCombinationType,createLegends:e.createLegends,setThumbnail:e.setThumbnail,getFeatures:e.wfsService.getFeatures,wfsService:e.wfsService,handleTableLayerChange:e.handleTableLayerChange,addOverlay:e.addOverlay,changeShowPopup:e.changeShowPopup,nextFeature:e.nextFeature,previousFeature:e.previousFeature,changeLayerOrder:e.changeLayerOrder,getLayerDataExtent:e.getLayerDataExtent,zoomToLayerData:e.zoomToLayerData,handleLayerVisibilty:e.handleLayerVisibilty,zoomToLocation:e.zoomToLocation,zoomToExtent:e.zoomToExtent,resetTablePagination:e.resetTablePagination,exportMap:e.exportMap,geocodeSearch:e.geocodeSearch,handlePageChange:e.handlePageChange,handleRowsPerPage:e.handleRowsPerPage,handleBaseMapVisibilty:e.handleBaseMapVisibilty,getFeatureTableData:e.getFeatureTableData,createQueryPanel:e.createQueryPanel,removeComponent:e.removeComponent,resetQuery:e.resetQuery,handleFeaturesTableDrawer:e.handleFeaturesTableDrawer,handleGeocodingChange:e.handleGeocodingChange,resetGeocoding:e.resetGeocoding,handleLayerOpacity:e.handleLayerOpacity})}};N.propTypes={urls:T.default.object.isRequired,config:T.default.object.isRequired},e.BasicViewerContainer={show:function(e,t,a){(0,k.render)(p.default.createElement(N,{urls:a,config:t}),document.getElementById(e))},getComponent:function(e,t){return p.default.createElement(N,{urls:t,config:e})}}}).call(this,a("yLpj"))},t2f6:function(e,t){},tzQh:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=y(a("YEIV")),r=y(a("Yz+Y")),l=y(a("iCc5")),u=y(a("V7oC")),o=y(a("FYw3")),i=y(a("mRg0")),d=(y(a("zWwt")),y(a("JgXy"))),s=y(a("NABS")),f=y(a("4eE1")),c=(a("f002"),y(a("pPbJ"))),p=y(a("17x9")),m=y(a("q1tI")),h=y(a("TSYQ")),g=a("SUMQ");function y(e){return e&&e.__esModule?e:{default:e}}var b=function(e){function t(){var e,a,n,u;(0,l.default)(this,t);for(var i=arguments.length,d=Array(i),s=0;s<i;s++)d[s]=arguments[s];return a=n=(0,o.default)(this,(e=t.__proto__||(0,r.default)(t)).call.apply(e,[this].concat(d))),n.zoomTo=function(e){var t=n.props,a=t.action;(0,t.resetGeocoding)(),a(e)},u=a,(0,o.default)(n,u)}return(0,i.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.geocodingResult,r=t.classes,l=t.geocodeSearchLoading;return m.default.createElement(c.default,{className:(0,h.default)("geocoding-result",(0,n.default)({},r.hide,l)),elevation:0},m.default.createElement(d.default,{className:"full-width",component:"nav"},a.map(function(t,a){return m.default.createElement(s.default,{onTouchTap:function(){return e.zoomTo(t.bbox)},key:a,button:!0},m.default.createElement(f.default,{primary:t.formatted}))})))}}]),t}(m.default.Component);b.propTypes={classes:p.default.object.isRequired,resetGeocoding:p.default.func.isRequired,geocodingResult:p.default.array.isRequired,action:p.default.func.isRequired,geocodeSearchLoading:p.default.bool.isRequired},t.default=(0,g.withStyles)(function(e){return{hide:{display:"none"}}})(b)},vmk0:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=y(a("Yz+Y")),r=y(a("iCc5")),l=y(a("V7oC")),u=y(a("FYw3")),o=y(a("mRg0")),i=y(a("1waj")),d=y(a("rOC7")),s=y(a("1IiC")),f=y(a("17x9")),c=y(a("dB5+")),p=y(a("q1tI")),m=y(a("8Gle")),h=y(a("bSwy")),g=a("SUMQ");function y(e){return e&&e.__esModule?e:{default:e}}var b=function(e){function t(){return(0,r.default)(this,t),(0,u.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,o.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.handleFilterChange,n=e.removeComponent,r=e.createQueryPanel,l=e.getFeatureTableData,u=e.filters,o=e.attributes;return p.default.createElement("div",{className:t.root},p.default.createElement("div",{className:t.queryBuilderTools},p.default.createElement(s.default,{onClick:r,className:t.button,"aria-label":"Add"},p.default.createElement(i.default,null)),u.length>0&&p.default.createElement(s.default,{onClick:function(){return l(void 0,void 0,void 0,!1)},className:t.button,"aria-label":"Search"},p.default.createElement(h.default,null)),u.length>0&&p.default.createElement(s.default,{onClick:function(){return l(void 0,void 0,void 0,!0)},className:t.button,"aria-label":"Download with Filters"},p.default.createElement(d.default,null))),p.default.createElement("div",{className:t.queryItemsContainer},u.length>0&&u.map(function(e,r){return p.default.createElement("div",{className:t.item,key:r},p.default.createElement(c.default,{handleFilterChange:a(r),filter:e,attributes:o}),p.default.createElement(s.default,{onClick:function(){return n(r)},className:t.button,"aria-label":"Delete"},p.default.createElement(m.default,null)))})))}}]),t}(p.default.Component);b.propTypes={classes:f.default.object.isRequired,attributes:f.default.array.isRequired,getFeatureTableData:f.default.func.isRequired,resetTablePagination:f.default.func.isRequired,removeComponent:f.default.func.isRequired,createQueryPanel:f.default.func.isRequired,filters:f.default.array.isRequired,handleFilterChange:f.default.func.isRequired},t.default=(0,g.withStyles)(function(e){return{root:{display:"flex",flexGrow:"1",flexDirection:"column"},queryBuilderTools:{display:"flex",flexWrap:"wrap",alignItems:"center",justifyContent:"center"},queryItemsContainer:{display:"flex",flexGrow:"1",flexWrap:"wrap",justifyContent:"center"},item:{display:"flex",alignItems:"center",flexDirection:"column",flexWrap:"wrap",justifyContent:"center",margin:e.spacing.unit,border:"2px #b8b8b8 solid"}}})(b)},yBWx:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=C(a("GQeE")),r=C(a("Yz+Y")),l=C(a("iCc5")),u=C(a("V7oC")),o=C(a("FYw3")),i=C(a("mRg0"));a("z2Xg");var d=C(a("1OZW")),s=C(a("1IiC")),f=a("f002"),c=C(a("17x9")),p=C(a("q1tI")),m=C(a("NeRm")),h=C(a("nzuV")),g=C(a("1TCx")),y=C(a("8+ys")),b=C(a("xfbS")),v=C(a("QUaF")),E=C(a("ueZX")),w=a("SUMQ");function C(e){return e&&e.__esModule?e:{default:e}}var T=(0,w.withStyles)(function(e){return{head:{backgroundColor:e.palette.primary.light,color:e.palette.common.white},body:{fontSize:14}}})(g.default),S=function(e){function t(){var e,a,u,i;(0,l.default)(this,t);for(var d=arguments.length,s=Array(d),f=0;f<d;f++)s[f]=arguments[f];return a=u=(0,o.default)(this,(e=t.__proto__||(0,r.default)(t)).call.apply(e,[this].concat(s))),u.getTableCol=function(){var e=u.props.features,t=[];if(e.length>0){var a=e[0];(0,n.default)(a.getProperties()).map(function(e){"the_geom"!==e&&"geometry"!==e&&t.push(e)})}return t},i=a,(0,o.default)(u,i)}return(0,i.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.loading,n=t.features,r=t.addStyleToFeature,l=t.resetFeatureCollection,u=t.classes,o=t.handlePageChange,i=t.handleRowsPerPage,c=t.page,w=t.rowsPerPage,C=t.totalFeatures,S=t.zoomToFeature,L=t.resetQuery;return p.default.createElement("div",{elevation:2,className:u.root},p.default.createElement("div",{className:u.actions},n.length>0&&p.default.createElement(d.default,{onClick:function(){return r(n)},color:"primary"},"Show On Map"),n.length>0&&p.default.createElement(d.default,{onClick:function(){return l()},color:"primary"},"Clear Map Selection"),p.default.createElement(d.default,{onClick:L,color:"primary"},"Reset")),p.default.createElement("div",{className:u.tableContainer},!a&&n.length>0&&p.default.createElement(m.default,{className:u.table},p.default.createElement(y.default,null,p.default.createElement(v.default,null,p.default.createElement(T,null,"Actions"),this.getTableCol().map(function(e,t){return p.default.createElement(T,{key:t},e)}))),p.default.createElement(h.default,null,n.map(function(t,a){return p.default.createElement(v.default,{className:u.row,key:a},p.default.createElement(g.default,null,p.default.createElement(s.default,{className:u.button,onClick:function(){return S(t)},"aria-label":"Delete"},p.default.createElement(E.default,null))),e.getTableCol().map(function(e,a){return p.default.createElement(g.default,{key:a},t.getProperties()[e])}))}))),!a&&n.length>0&&p.default.createElement(b.default,{component:"div",count:C,rowsPerPage:w,labelDisplayedRows:function(e){e.from;return"This Page Showing "+e.to+" of "+e.count+" Result/Total"},page:c,labelRowsPerPage:"Number Of Features Per Page",rowsPerPageOptions:[5,10,25,50,100,200,400],backIconButtonProps:{"aria-label":"Previous Page"},nextIconButtonProps:{"aria-label":"Next Page"},onChangePage:o,onChangeRowsPerPage:i}),!a&&0==n.length&&p.default.createElement(f.Message,{type:"title",message:"No Features"})))}}]),t}(p.default.Component);S.propTypes={features:c.default.array.isRequired,classes:c.default.object.isRequired,searchEnabled:c.default.bool.isRequired,totalFeatures:c.default.number.isRequired,zoomToFeature:c.default.func.isRequired,getFeatureTableData:c.default.func.isRequired,addStyleToFeature:c.default.func.isRequired,resetFeatureCollection:c.default.func.isRequired,loading:c.default.bool.isRequired,handlePageChange:c.default.func.isRequired,handleRowsPerPage:c.default.func.isRequired,page:c.default.number.isRequired,rowsPerPage:c.default.number.isRequired,resetQuery:c.default.func.isRequired},t.default=(0,w.withStyles)(function(e){return{root:{width:"100%",height:"100%",display:"block"},button:{height:"auto !important"},tableContainer:{maxWidth:"99.9%",overflowX:"scroll"},row:{"&:nth-of-type(odd)":{backgroundColor:e.palette.background.default}},actions:{display:"flex",justifyContent:"center"}}})(S)}})});
//# sourceMappingURL=/static/cartoview_basic_viewer/dist/sourcemaps/../BasicViewer.bundle.js.map
//# sourceMappingURL=BasicViewer.bundle.js.map