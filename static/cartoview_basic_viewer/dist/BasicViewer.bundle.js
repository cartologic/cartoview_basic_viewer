!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("BasicViewer",[],t):"object"==typeof exports?exports.BasicViewer=t():e.BasicViewer=t()}(window,function(){return function(e){function t(t){for(var l,u,i=t[0],o=t[1],d=t[2],f=0,c=[];f<i.length;f++)u=i[f],n[u]&&c.push(n[u][0]),n[u]=0;for(l in o)Object.prototype.hasOwnProperty.call(o,l)&&(e[l]=o[l]);for(s&&s(t);c.length;)c.shift()();return r.push.apply(r,d||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a=r[t],l=!0,i=1;i<a.length;i++){var o=a[i];0!==n[o]&&(l=!1)}l&&(r.splice(t--,1),e=u(u.s=a[0]))}return e}var l={},n={3:0},r=[];function u(t){if(l[t])return l[t].exports;var a=l[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,u),a.l=!0,a.exports}u.m=e,u.c=l,u.d=function(e,t,a){u.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},u.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.t=function(e,t){if(1&t&&(e=u(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(u.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var l in e)u.d(a,l,function(t){return e[t]}.bind(null,l));return a},u.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return u.d(t,"a",t),t},u.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},u.p="/static/cartoview_basic_viewer/dist/";var i=window.webpackJsonp_name_=window.webpackJsonp_name_||[],o=i.push.bind(i);i.push=t,i=i.slice();for(var d=0;d<i.length;d++)t(i[d]);var s=o;return r.push(["qnMZ",0,2]),a()}({"/rak":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=j(a("Yz+Y")),n=j(a("iCc5")),r=j(a("V7oC")),u=j(a("FYw3")),i=j(a("mRg0")),o=a("8kXw"),d=j(o),s=j(a("nV/U")),f=j(a("AwYw")),c=j(a("BP9j")),p=j(a("HEer")),m=j(a("07X8")),h=j(a("7y31")),g=j(a("Rme4")),y=j(a("rXAq")),b=j(a("E8kk")),v=j(a("fgxa")),E=j(a("JgXy")),w=j(a("NABS")),C=j(a("zOyN")),T=j(a("aAba")),S=j(a("4eE1")),P=a("f002"),x=j(a("r2we")),L=j(a("vm6e")),R=j(a("Nv8t")),F=j(a("pPbJ")),_=j(a("IQpg")),q=j(a("TSlj")),k=j(a("17x9")),M=j(a("q1tI")),N=j(a("bSwy")),I=j(a("WK16")),O=j(a("TSYQ")),D=a("SUMQ");function j(e){return e&&e.__esModule?e:{default:e}}var V=function(e){function t(){var e,a,r,i;(0,n.default)(this,t);for(var o=arguments.length,d=Array(o),s=0;s<o;s++)d[s]=arguments[s];return a=r=(0,u.default)(this,(e=t.__proto__||(0,l.default)(t)).call.apply(e,[this].concat(d))),r.state={about:!1},r.handleAboutChange=function(){var e=r.state.about;r.setState({about:!e})},i=a,(0,u.default)(r,i)}return(0,i.default)(t,e),(0,r.default)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.className,l=e.createLegends,n=e.urls,r=e.mapLayers,u=e.changeLayerOrder,i=e.handleLayerVisibilty,k=e.config,D=e.exportMap,j=e.handleFeaturesTableDrawer,V=e.map,z=e.setThumbnail,Y=e.thumbnailSaving,Q=e.baseMaps,B=e.handleLayerOpacity,G=e.handleBaseMapVisibilty,W=e.downloadLayer,U=e.handleTableLayerChange,A=this.state.about;return M.default.createElement(F.default,{elevation:6,className:(0,O.default)(t.root,a)},M.default.createElement(R.default,null),M.default.createElement(F.default,{className:t.drawerPaper,elevation:0},M.default.createElement(E.default,{disablePadding:!0},M.default.createElement(w.default,{onTouchTap:function(){return window.location.href=n.appInstancesPage},button:!0},M.default.createElement(C.default,null,M.default.createElement(g.default,null)),M.default.createElement(S.default,{primary:"Home"})),k.showLayerSwitcher&&M.default.createElement(h.default,{open:!1,title:"Layers",icon:M.default.createElement(v.default,null)},M.default.createElement(d.default,{handleFeaturesTableDrawer:j,handleLayerOpacity:B,handleTableLayerChange:U,urls:n,downloadLayer:W,handleLayerVisibilty:i,changeLayerOrder:u,mapLayers:r})),k.showLegend&&M.default.createElement(h.default,{open:!1,title:"Legend",icon:M.default.createElement(y.default,null)},M.default.createElement(p.default,{createLegends:l})),M.default.createElement(h.default,{open:!1,title:"Base Maps",icon:M.default.createElement(L.default,null)},M.default.createElement(o.BaseMapSwitcher,{baseMaps:Q,handleBaseMapVisibilty:G})),k.bookmarks&&M.default.createElement(h.default,{open:!1,title:"Bookmarks",icon:M.default.createElement(x.default,null)},M.default.createElement(c.default,{map:V,bookmarks:k.bookmarks})),M.default.createElement(h.default,{open:!1,title:"Print Tools",icon:M.default.createElement(q.default,null)},M.default.createElement(E.default,null,M.default.createElement(h.default,{open:!1,title:"Print PDF",icon:M.default.createElement(_.default,null)},M.default.createElement(m.default,{token:k.token,urls:n,map:V})),k.showExportMap&&M.default.createElement(w.default,{onTouchTap:D,button:!0},M.default.createElement(C.default,null,M.default.createElement(s.default,null)),M.default.createElement(S.default,{primary:"Export Map (PNG/JPG)"})))),k.enableFeatureTable&&M.default.createElement(w.default,{onTouchTap:j,button:!0},M.default.createElement(C.default,null,M.default.createElement(N.default,null)),M.default.createElement(S.default,{primary:"Query"})),M.default.createElement(w.default,{onTouchTap:z,button:!0},M.default.createElement(C.default,null,M.default.createElement(I.default,null)),M.default.createElement(S.default,{primary:"Set Thumbnail"}),Y&&M.default.createElement(T.default,null,M.default.createElement(P.Loader,{size:20,thickness:4}))),M.default.createElement(w.default,{onTouchTap:this.handleAboutChange,button:!0},M.default.createElement(C.default,null,M.default.createElement(b.default,null)),M.default.createElement(S.default,{primary:"About"})),M.default.createElement(f.default,{open:A,title:k.title,abstract:k.abstract,close:this.handleAboutChange}))))}}]),t}(M.default.Component);V.propTypes={classes:k.default.object.isRequired,className:k.default.string.isRequired,changeLayerOrder:k.default.func.isRequired,createLegends:k.default.func.isRequired,handleTableLayerChange:k.default.func.isRequired,resetTablePagination:k.default.func.isRequired,urls:k.default.object.isRequired,mapLayers:k.default.array.isRequired,baseMaps:k.default.array.isRequired,handleLayerVisibilty:k.default.func.isRequired,exportMap:k.default.func.isRequired,downloadLayer:k.default.func.isRequired,handleFeaturesTableDrawer:k.default.func.isRequired,config:k.default.object.isRequired,map:k.default.object.isRequired,setThumbnail:k.default.func.isRequired,handleLayerOpacity:k.default.func.isRequired,thumbnailSaving:k.default.bool.isRequired,handleBaseMapVisibilty:k.default.func.isRequired,handlePrintModal:k.default.func.isRequired},t.default=(0,D.withStyles)(function(e){return{root:{height:"100%"},drawerPaper:{padding:0,height:"calc(100% - 64px)",overflowY:"scroll"},button:{margin:e.spacing.unit}}})(V)},"07X8":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=E(a("Yz+Y")),n=E(a("iCc5")),r=E(a("V7oC")),u=E(a("FYw3")),i=E(a("mRg0")),o=E(a("YEIV")),d=E(a("1OZW")),s=E(a("1DzM")),f=E(a("ctcd")),c=a("f002"),p=E(a("n5s8")),m=E(a("2KZF")),h=E(a("17x9")),g=E(a("q1tI")),y=E(a("XdPI")),b=E(a("ZqOF")),v=a("SUMQ");function E(e){return e&&e.__esModule?e:{default:e}}var w=function(e){function t(e){(0,n.default)(this,t);var a=(0,u.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e));a.showBox=function(){var e=a.state,t=e.scale,l=e.dpi,n=e.layout,r=a.printModule.getPolygonCoords(t,l,n),u=a.printModule.getPolygonFeature(r);a.printModule.addPrintLayer(u)},a.print=function(){var e=a.state,t=e.title,l=e.comment,n=e.layout,r=e.dpi,u=e.scale;a.setState({printLoading:!0}),n&&r&&u&&a.printModule.createPDF(t,l,n,r,u).then(function(e){a.setState({printLoading:!e})}).catch(function(e){a.setState({printLoading:!1})})},a.handleChange=function(e){return function(t){var l=t.target.value;"title"===e&&l.length<100?a.setState((0,o.default)({},e,l)):"title"!==e&&a.setState((0,o.default)({},e,l))}},a.handleSelectChange=function(e){var t=e.target.value,l=e.target.name;a.setState((0,o.default)({},l,t),a.showBox)};var r=a.props,i=r.token,d=r.urls,s=r.map;return a.state={title:"",comment:"",layout:"Landscape",dpi:96,scale:"",printLoading:!1},a.printModule=new m.default(s,d.geoserverUrl,i,d.proxy),a}return(0,i.default)(t,e),(0,r.default)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.state.dpi;this.printModule.getPrintInfo().then(function(a){var l=e.printModule._getLayout(),n=[l.map.width,l.map.height],r=e.printModule.getOptimalScale(n,t);e.setState({scale:r,layout:l.name})})}},{key:"componentWillUnmount",value:function(){this.printModule.removePrintLayer()}},{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state.printLoading,l=this.printModule.pdfInfo;return g.default.createElement("div",null,g.default.createElement("div",{className:t.modalContent},g.default.createElement(b.default,{id:"title",label:"Title",className:t.textField,value:this.state.title,onChange:this.handleChange("title"),margin:"normal",fullWidth:!0}),g.default.createElement(b.default,{id:"comment",label:"Comment",multiline:!0,rowsMax:"4",className:t.textField,value:this.state.comment,onChange:this.handleChange("comment"),margin:"normal",fullWidth:!0}),l&&g.default.createElement(s.default,{className:t.formControl},g.default.createElement(f.default,{htmlFor:"print-layout"},"Layout"),g.default.createElement(y.default,{classes:{select:t.fullWidth},value:this.state.layout,onChange:this.handleSelectChange,inputProps:{name:"layout",id:"print-layout"}},l&&l.layouts.map(function(e,t){return g.default.createElement(p.default,{key:t,value:e.name},e.name)}))),l&&g.default.createElement(s.default,{className:t.formControl},g.default.createElement(f.default,{htmlFor:"print-layout"},"Scale"),g.default.createElement(y.default,{classes:{select:t.fullWidth},value:this.state.scale,onChange:this.handleSelectChange,inputProps:{name:"scale",id:"print-scale"}},g.default.createElement(p.default,{value:""},g.default.createElement("em",null,"None")),l&&l.scales.map(function(e,t){return g.default.createElement(p.default,{key:t,value:Number(e.value)},e.name)}))),l&&g.default.createElement(s.default,{className:t.formControl},g.default.createElement(f.default,{htmlFor:"print-layout"},"DPI"),g.default.createElement(y.default,{classes:{select:t.fullWidth},value:this.state.dpi,onChange:this.handleSelectChange,inputProps:{name:"dpi",id:"print-dpi"}},l&&l.dpis.map(function(e,t){return g.default.createElement(p.default,{key:t,value:Number(e.value)},e.name)})))),g.default.createElement("div",{className:t.actionButtons},g.default.createElement(d.default,{onClick:this.showBox,color:"primary"},"Show Print Box"),g.default.createElement(d.default,{onClick:this.print,color:"primary"},"Print"),g.default.createElement(d.default,{onClick:function(){return e.printModule.removePrintLayer()},color:"secondary",autoFocus:!0},"Cancel"),a&&g.default.createElement(c.Loader,null)))}}]),t}(g.default.Component);w.propTypes={token:h.default.string,map:h.default.object.isRequired,classes:h.default.object.isRequired,urls:h.default.object.isRequired},t.default=(0,v.withStyles)(function(e){return{container:{display:"flex",flexWrap:"wrap"},textField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit},menu:{width:200},formControl:{margin:e.spacing.unit,width:"100%"},selectEmpty:{marginTop:2*e.spacing.unit},fullWidth:{width:"100%"},modalContent:{display:"block",justifyContent:"center",alignItems:"center",flexDirection:"column",flex:".5",margin:2*e.spacing.unit},mapDiv:{width:"100%",height:"100%",boxSizing:"content-box",position:"relative"},mapContainer:{width:"752px",height:"300px",boxSizing:"content-box",border:"2px black solid"},root:(0,o.default)({display:"flex",flexDirection:"column",height:"100%"},e.breakpoints.down("md"),{flexDirection:"column",overflowY:"scroll"}),actionButtons:{display:"flex",justifyContent:"center"},button:{margin:e.spacing.unit}}})(w)},"6V6Y":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=c(a("Yz+Y")),n=c(a("iCc5")),r=c(a("V7oC")),u=c(a("FYw3")),i=c(a("mRg0"));t.logger=function(e,t){switch(t=t||"black"){case"success":t="Green";break;case"info":t="DodgerBlue";break;case"error":t="Red";break;case"warning":t="Orange";break;default:t=t}console.log("%c"+e,"color:"+t)};var o=a("f002"),d=c(a("17x9")),s=c(a("q1tI")),f=a("SUMQ");function c(e){return e&&e.__esModule?e:{default:e}}var p=function(e){function t(e){(0,n.default)(this,t);var a=(0,u.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e));return a.state={hasError:!1},a}return(0,i.default)(t,e),(0,r.default)(t,[{key:"componentDidCatch",value:function(e,t){this.setState({hasError:!0,error:e,info:t})}},{key:"render",value:function(){var e=this.props.classes;return this.state.hasError?s.default.createElement("div",{className:e.root},s.default.createElement(o.Message,{message:"Something went wrong.",type:"title"}),s.default.createElement(o.Message,{message:"Contact us >> cartoview@cartologic.com",type:"title"}),s.default.createElement("br",null),s.default.createElement(o.Message,{noWrap:!1,message:""+this.state.error.toString(),type:"subheading"}),s.default.createElement(o.Message,{noWrap:!1,message:""+this.state.info.componentStack,type:"subheading"})):this.props.children}}]),t}(s.default.Component);p.propTypes={classes:d.default.object.isRequired,children:d.default.node.isRequired},t.default=(0,f.withStyles)(function(e){return{root:{height:"100%",padding:2*e.spacing.unit}}})(p)},"7y31":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=w(a("YEIV")),n=w(a("Yz+Y")),r=w(a("iCc5")),u=w(a("V7oC")),i=w(a("FYw3")),o=w(a("mRg0")),d=w(a("ciEP")),s=w(a("EHL7")),f=w(a("1iKp")),c=w(a("1IiC")),p=w(a("NABS")),m=w(a("zOyN")),h=w(a("aAba")),g=w(a("4eE1")),y=w(a("17x9")),b=w(a("q1tI")),v=w(a("TSYQ")),E=a("SUMQ");function w(e){return e&&e.__esModule?e:{default:e}}var C=function(e){function t(e){(0,r.default)(this,t);var a=(0,i.default)(this,(t.__proto__||(0,n.default)(t)).call(this,e));a.handleDetailsExpand=function(){a.setState({expanded:!a.state.expanded})};var l=a.props.open;return a.state={expanded:void 0===l||l},a}return(0,o.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.children,n=e.title,r=e.icon;return b.default.createElement("div",null,b.default.createElement(p.default,{button:!0,onTouchTap:this.handleDetailsExpand},b.default.createElement(m.default,null,r),b.default.createElement(g.default,{primary:n}),b.default.createElement(h.default,null,b.default.createElement(c.default,{className:(0,v.default)(t.expand,(0,l.default)({},t.expandOpen,this.state.expanded)),onTouchTap:this.handleDetailsExpand,"aria-expanded":this.state.expanded,"aria-label":"Show more"},b.default.createElement(f.default,null)))),b.default.createElement(d.default,{in:this.state.expanded,transitionduration:"auto",unmountOnExit:!0},a,b.default.createElement(s.default,null)))}}]),t}(b.default.Component);C.propTypes={classes:y.default.object.isRequired,title:y.default.string.isRequired,children:y.default.object.isRequired,open:y.default.bool,icon:y.default.object.isRequired},t.default=(0,E.withStyles)(function(e){return{expand:{transform:"rotate(0deg)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"}}})(C)},"8kXw":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseMapSwitcher=void 0;var l=F(a("Yz+Y")),n=F(a("iCc5")),r=F(a("V7oC")),u=F(a("FYw3")),i=F(a("mRg0"));a("P5Gt");var o=a("Nxrd"),d=F(a("XaW4")),s=F(a("KwhB")),f=F(a("P5iC")),c=F(a("1DzM")),p=F(a("JOJA")),m=F(a("CQWw")),h=F(a("3/Tk")),g=F(a("JgXy")),y=F(a("NABS")),b=F(a("WqRt")),v=F(a("n5s8")),E=a("f002"),w=F(a("pPbJ")),C=F(a("17x9")),T=F(a("7c0o")),S=F(a("NzOW")),P=F(a("q1tI")),x=F(a("YVZI")),L=a("Yvh9"),R=a("SUMQ");function F(e){return e&&e.__esModule?e:{default:e}}var _=(0,o.SortableHandle)(function(){return P.default.createElement(s.default,null)}),q=(0,o.SortableElement)(function(e){var t=e.layer,a=e.layerIndex,l=e.handleLayerVisibilty,n=e.downloadLayer,r=e.urls,u=e.handleTableLayerChange,i=e.handleFeaturesTableDrawer,o=e.handleLayerOpacity,s=t.getProperties().name,c=t.getProperties().title;return P.default.createElement(y.default,{disableGutters:!0,className:"layer-switcher-item dense"},P.default.createElement(_,null),P.default.createElement(d.default,{checked:t.getVisible(),tabIndex:-1,onChange:l(a),disableRipple:!0}),P.default.createElement("div",{className:"element-flex element-column title-noWrap"},P.default.createElement(E.Message,{message:c,noWrap:!0,align:"left",type:"body1"}),P.default.createElement(h.default,{minValue:0,maxValue:1,step:.1,value:t.getOpacity(),onChange:o(a)})),P.default.createElement(f.default,null,P.default.createElement(v.default,{onTouchTap:function(){return n(s)}},"Download Layer"),P.default.createElement(v.default,{onTouchTap:function(){return window.open(r.layerMetaData(s),"_blank")}},"Metadata Details"),P.default.createElement(v.default,{onTouchTap:function(){var e=new x.default(r.proxy).getParamterizedURL(r.wfsURL,{service:"wfs",version:"2.0.0",request:"GetFeature",typeNames:t.get("name"),outputFormat:"json"});(0,L.copyToClipboard)(e).then(function(e){return alert("WFS URL Copied Successfully")})}},"Copy WFS URL"),P.default.createElement(v.default,{onTouchTap:function(){u({target:{value:s}}),i()}},"Query/Table")))}),k=(0,o.SortableContainer)(function(e){var t=e.layers,a=e.handleLayerVisibilty,l=e.downloadLayer,n=e.urls,r=e.handleTableLayerChange,u=e.handleFeaturesTableDrawer,i=e.handleLayerOpacity;return P.default.createElement(g.default,{disablePadding:!0,subheader:P.default.createElement(b.default,null,"Drag & Drop To Order the Layers")},t.map(function(e,t){return P.default.createElement(q,{handleLayerVisibilty:a,downloadLayer:l,urls:n,handleTableLayerChange:r,handleFeaturesTableDrawer:u,handleLayerOpacity:i,key:"item-"+t,index:t,layerIndex:t,layer:e})}))}),M=function(e){function t(){return(0,n.default)(this,t),(0,u.default)(this,(t.__proto__||(0,l.default)(t)).apply(this,arguments))}return(0,i.default)(t,e),(0,r.default)(t,[{key:"render",value:function(){for(var e=this.props,t=e.baseMaps,a=e.handleBaseMapVisibilty,l=e.classes,n=null,r=0;r<t.length;r++){var u=t[r];if(u.getVisible()){n=u.get("id");break}}return P.default.createElement(c.default,{component:"fieldset",className:l.formControl},P.default.createElement(m.default,{component:"legend"},"BaseMaps"),P.default.createElement(S.default,{"aria-label":"BaseMapSwithcer",name:"base_map_switcher",className:l.group,value:n,onChange:a},t.map(function(e,t){return P.default.createElement(p.default,{key:"item-"+t,value:e.get("id"),control:P.default.createElement(T.default,null),label:e.get("title")})})))}}]),t}(P.default.Component);M.propTypes={baseMaps:C.default.array.isRequired,classes:C.default.object.isRequired,handleBaseMapVisibilty:C.default.func.isRequired};t.BaseMapSwitcher=(0,R.withStyles)(function(e){return{formControl:{margin:3*e.spacing.unit},group:{margin:e.spacing.unit+"px 0"}}})(M);var N=function(e){function t(){return(0,n.default)(this,t),(0,u.default)(this,(t.__proto__||(0,l.default)(t)).apply(this,arguments))}return(0,i.default)(t,e),(0,r.default)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.mapLayers,l=e.changeLayerOrder,n=e.handleLayerVisibilty,r=e.downloadLayer,u=e.urls,i=e.handleTableLayerChange,o=e.handleLayerOpacity,d=e.handleFeaturesTableDrawer;return P.default.createElement(w.default,{className:t.legendsPaper,elevation:0},a.length>0&&P.default.createElement(k,{useDragHandle:!0,layers:a,handleLayerVisibilty:n,downloadLayer:r,urls:u,handleTableLayerChange:i,handleFeaturesTableDrawer:d,handleLayerOpacity:o,helperClass:"sortable-container",onSortEnd:l}),0==a.length&&P.default.createElement(E.Message,{message:"No Layers",align:"center",type:"body1"}))}}]),t}(P.default.Component);N.propTypes={urls:C.default.object.isRequired,classes:C.default.object.isRequired,downloadLayer:C.default.func.isRequired,handleFeaturesTableDrawer:C.default.func.isRequired,handleLayerOpacity:C.default.func.isRequired,handleTableLayerChange:C.default.func.isRequired,mapLayers:C.default.array.isRequired,changeLayerOrder:C.default.func.isRequired,handleLayerVisibilty:C.default.func.isRequired},t.default=(0,R.withStyles)(function(e){return{legendsPaper:{padding:2*e.spacing.unit}}})(N)},AwYw:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=y(a("Yz+Y")),n=y(a("iCc5")),r=y(a("V7oC")),u=y(a("FYw3")),i=y(a("mRg0")),o=y(a("1OZW")),d=y(a("0G56")),s=y(a("Sk/v")),f=y(a("SNP2")),c=y(a("/xgX")),p=y(a("C+zi")),m=y(a("17x9")),h=y(a("q1tI")),g=y(a("htac"));function y(e){return e&&e.__esModule?e:{default:e}}var b=function(e){function t(){return(0,n.default)(this,t),(0,u.default)(this,(t.__proto__||(0,l.default)(t)).apply(this,arguments))}return(0,i.default)(t,e),(0,r.default)(t,[{key:"render",value:function(){var e=this.props,t=e.fullScreen,a=e.title,l=e.abstract,n=e.close,r=e.open;return h.default.createElement(d.default,{fullScreen:t,open:r,onClose:n},h.default.createElement(p.default,null,a),h.default.createElement(f.default,null,h.default.createElement(c.default,null,l)),h.default.createElement(s.default,null,h.default.createElement(o.default,{onClick:n,color:"primary"},"Close")))}}]),t}(h.default.Component);b.propTypes={fullScreen:m.default.bool.isRequired,title:m.default.string.isRequired,open:m.default.bool.isRequired,abstract:m.default.string,close:m.default.func.isRequired},t.default=(0,g.default)()(b)},BP9j:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=w(a("Yz+Y")),n=w(a("iCc5")),r=w(a("V7oC")),u=w(a("FYw3")),i=w(a("mRg0")),o=w(a("QGGi")),d=w(a("XImL")),s=w(a("bV9N")),f=w(a("1IiC")),c=w(a("JgXy")),p=w(a("NABS")),m=w(a("aAba")),h=w(a("4eE1")),g=a("f002"),y=w(a("17x9")),b=w(a("q1tI")),v=w(a("ueZX")),E=a("SUMQ");function w(e){return e&&e.__esModule?e:{default:e}}var C=function(e){function t(e){(0,n.default)(this,t);var a=(0,u.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e));return a.handleChange=function(e){var t=a.props.map,l=e.extent.split("/").map(function(e){return parseFloat(e)});d.default.fitExtent(l,t,300)},a.state={value:""},a}return(0,i.default)(t,e),(0,r.default)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.classes,l=t.bookmarks;return b.default.createElement("div",{className:a.root},l&&l.length>0&&b.default.createElement(c.default,null,l.map(function(t,l){return b.default.createElement(p.default,{key:l},b.default.createElement(o.default,null,b.default.createElement(s.default,null)),b.default.createElement("div",{className:a.bookmarkDetails},b.default.createElement(h.default,{primary:t.name,className:a.bookmarkName}),b.default.createElement(h.default,{primary:t.description,className:a.bookmarkDescription,disableTypography:!0})),b.default.createElement(m.default,null,b.default.createElement(f.default,{onClick:function(){return e.handleChange(t)},"aria-label":"Zoom To "+t.name},b.default.createElement(v.default,null))))})),(!l||0==l.length)&&b.default.createElement(g.Message,{message:"No Bookmarks",type:"caption"}))}}]),t}(b.default.Component);C.propTypes={classes:y.default.object.isRequired,bookmarks:y.default.array.isRequired,map:y.default.object.isRequired},t.default=(0,E.withStyles)(function(e){return{root:{padding:2*e.spacing.unit},bookmarkDetails:{display:"flex",flexDirection:"column"},bookmarkName:{padding:"0 16px !important"},bookmarkDescription:{fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif',fontWeight:"300",fontSize:"smaller"}}})(C)},HEer:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=m(a("Yz+Y")),n=m(a("iCc5")),r=m(a("V7oC")),u=m(a("FYw3")),i=m(a("mRg0")),o=a("f002"),d=m(a("zWwt")),s=m(a("pPbJ")),f=m(a("17x9")),c=m(a("q1tI")),p=a("SUMQ");function m(e){return e&&e.__esModule?e:{default:e}}var h=function(e){var t=e.legend;return c.default.createElement("div",{className:"full-width element-block"},c.default.createElement(o.Message,{align:"center",message:""+t.layer,type:"body1"}),c.default.createElement(d.default,{src:[t.url],loader:c.default.createElement(o.Loader,{align:"center",size:30})}))};h.propTypes={legend:f.default.object.isRequired};var g=function(e){function t(){return(0,n.default)(this,t),(0,u.default)(this,(t.__proto__||(0,l.default)(t)).apply(this,arguments))}return(0,i.default)(t,e),(0,r.default)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=(0,e.createLegends)();return c.default.createElement(s.default,{className:t.legendsPaper,elevation:0},a.length>0&&a.map(function(e,t){return c.default.createElement(h,{key:t,legend:e})}),0===a.length&&c.default.createElement(o.Message,{message:"No Legends",align:"center",type:"body1"}))}}]),t}(c.default.Component);g.propTypes={classes:f.default.object.isRequired,createLegends:f.default.func.isRequired},t.default=(0,p.withStyles)(function(e){return{legendsPaper:{padding:2*e.spacing.unit,textAlign:"center"}}})(g)},Nv8t:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=m(a("Yz+Y")),n=m(a("iCc5")),r=m(a("V7oC")),u=m(a("FYw3")),i=m(a("mRg0")),o=m(a("QbLZ")),d=m(a("YDiY")),s=(a("f002"),m(a("17x9"))),f=m(a("q1tI")),c=m(a("2VVu")),p=a("SUMQ");function m(e){return e&&e.__esModule?e:{default:e}}var h=function(e){function t(){return(0,n.default)(this,t),(0,u.default)(this,(t.__proto__||(0,l.default)(t)).apply(this,arguments))}return(0,i.default)(t,e),(0,r.default)(t,[{key:"render",value:function(){var e=this.props.classes;return f.default.createElement("div",{className:e.root},f.default.createElement(d.default,{className:e.drawerHeader,position:"static"},f.default.createElement(c.default,null)))}}]),t}(f.default.Component);h.propTypes={classes:s.default.object.isRequired},t.default=(0,p.withStyles)(function(e){return{root:{width:"100%"},drawerPaper:{width:"100%"},drawerHeader:(0,o.default)({background:e.palette.primary[500],display:"flex",justifyContent:"flex-end",padding:"0 8px"},e.mixins.toolbar)}},{withTheme:!0})(h)},P5iC:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.guidGenerator=void 0;var l=m(a("Yz+Y")),n=m(a("iCc5")),r=m(a("V7oC")),u=m(a("FYw3")),i=m(a("mRg0")),o=m(a("1IiC")),d=m(a("5PQa")),s=m(a("ZuSV")),f=m(a("17x9")),c=m(a("q1tI")),p=a("SUMQ");function m(e){return e&&e.__esModule?e:{default:e}}var h=t.guidGenerator=function(){var e=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},g=function(e){function t(e){(0,n.default)(this,t);var a=(0,u.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e));return a.handleClick=function(e){a.setState({anchorEl:e.currentTarget})},a.handleClose=function(){a.setState({anchorEl:null})},a.state={anchorEl:null},a.id=h(),a}return(0,i.default)(t,e),(0,r.default)(t,[{key:"render",value:function(){var e=this.props,t=e.children,a=e.classes,l=this.state.anchorEl;return c.default.createElement("div",null,c.default.createElement(o.default,{className:a.button,"aria-label":"More","aria-owns":l?this.id:null,"aria-haspopup":"true",onClick:this.handleClick},c.default.createElement(s.default,null)),c.default.createElement(d.default,{id:this.id,anchorEl:l,open:Boolean(l),onClose:this.handleClose,PaperProps:{style:{maxHeight:150,width:200}}},t))}}]),t}(c.default.Component);g.propTypes={children:f.default.any.isRequired,classes:f.default.object.isRequired},t.default=(0,p.withStyles)(function(e){return{button:{margin:0}}})(g)},RQfP:function(e,t){},"U/ks":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=m(a("Yz+Y")),n=m(a("iCc5")),r=m(a("V7oC")),u=m(a("FYw3")),i=m(a("mRg0")),o=m(a("XImL")),d=m(a("17x9")),s=m(a("q1tI")),f=m(a("XfWh")),c=a("SUMQ"),p=m(a("vmpl"));function m(e){return e&&e.__esModule?e:{default:e}}var h=function(e){function t(e){(0,n.default)(this,t);var a=(0,u.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e));return a.handleHistory=function(){var e=a.props.map;e.on("moveend",function(t){var l=t.map,n="/"+e.getView().calculateExtent(l.getSize()).join("/");a.props.match.url!==n&&a.props.history.push(n)})},a.fitHistory=function(){var e=a.props.map,t=a.props.match;if(t&&t.params.x0&&t.params.y0){var l=[parseFloat(t.params.x0),parseFloat(t.params.y0)];t.params.x1&&t.params.y1&&l.push(parseFloat(t.params.x1),parseFloat(t.params.y1)),l!==e.getView().calculateExtent()&&o.default.fitExtent(l,e)}},a}return(0,i.default)(t,e),(0,r.default)(t,[{key:"componentWillReceiveProps",value:function(e){e.loading===this.props.loading||e.loading||(this.fitHistory(),e.enableHistory&&this.handleHistory())}},{key:"componentDidMount",value:function(){this.props.map.setTarget(this.mapDiv)}},{key:"componentDidUpdate",value:function(e,t){var a=this.props.width;e.width!==a&&e.map.updateSize()}},{key:"render",value:function(){var e=this;return s.default.createElement("div",{id:"map",ref:function(t){return e.mapDiv=t},className:"map-panel"})}}]),t}(s.default.Component);h.propTypes={map:d.default.object.isRequired,classes:d.default.object.isRequired,enableHistory:d.default.bool,loading:d.default.bool.isRequired,width:d.default.string,match:d.default.object.isRequired,history:d.default.object.isRequired},t.default=(0,f.default)((0,c.withStyles)(function(e){return{}}),(0,p.default)())(h)},VNM4:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=g(a("Yz+Y")),n=g(a("iCc5")),r=g(a("V7oC")),u=g(a("FYw3")),i=g(a("mRg0")),o=g(a("ZPUd")),d=g(a("MwB+")),s=a("f002"),f=g(a("17x9")),c=g(a("q1tI")),p=g(a("bSwy")),m=g(a("TSYQ")),h=a("SUMQ");function g(e){return e&&e.__esModule?e:{default:e}}var y=function(e){function t(){var e,a,r,i;(0,n.default)(this,t);for(var o=arguments.length,d=Array(o),s=0;s<o;s++)d[s]=arguments[s];return a=r=(0,u.default)(this,(e=t.__proto__||(0,l.default)(t)).call.apply(e,[this].concat(d))),r.handleKeyPress=function(e){var t=r.props.config;"Enter"==e.key&&""!=t.searchText&&t.geocodeSearch()},i=a,(0,u.default)(r,i)}return(0,i.default)(t,e),(0,r.default)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.config;return c.default.createElement("div",{className:(0,m.default)("search-paper fill-out-empty",[t.paper]),elevation:1},c.default.createElement(d.default,{placeholder:"Search(Geocoding)....",onChange:a.handleGeocodingChange,className:t.textField,inputProps:{onKeyPress:this.handleKeyPress},value:a.searchText}),a.searchText&&""!==a.searchText&&c.default.createElement(p.default,{onTouchTap:function(){return a.geocodeSearch()},className:t.icon}),a.geocodingResult.length>0&&c.default.createElement(o.default,{onTouchTap:a.resetGeocoding,className:t.icon}),a.geocodeSearchLoading&&c.default.createElement(s.Loader,{size:30,thickness:3}))}}]),t}(c.default.Component);y.propTypes={classes:f.default.object.isRequired,config:f.default.shape({searchText:f.default.string.isRequired,geocodeSearch:f.default.func.isRequired,geocodeSearchLoading:f.default.bool.isRequired,handleGeocodingChange:f.default.func.isRequired,resetGeocoding:f.default.func.isRequired})},t.default=(0,h.withStyles)(function(e){return{textField:{width:"100%"},paper:{alignItems:"center",justifyContent:"center"},icon:{color:e.palette.primary.main}}})(y)},VtWp:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=g(a("Yz+Y")),n=g(a("iCc5")),r=g(a("V7oC")),u=g(a("FYw3")),i=g(a("mRg0")),o=a("q1tI"),d=g(o),s=g(a("fTbZ")),f=g(a("6V6Y")),c=a("SUMQ"),p=g(a("17x9")),m=g(a("DGHy")),h=a("Wied");function g(e){return e&&e.__esModule?e:{default:e}}(0,m.default)();var y=function(e){function t(){return(0,n.default)(this,t),(0,u.default)(this,(t.__proto__||(0,l.default)(t)).apply(this,arguments))}return(0,i.default)(t,e),(0,r.default)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.childrenProps;return d.default.createElement(c.MuiThemeProvider,{theme:h.theme},d.default.createElement(f.default,null,d.default.createElement("div",{className:t.root},d.default.createElement(s.default,{childrenProps:a,map:a.map}))))}}]),t}(o.Component);y.propTypes={classes:p.default.object.isRequired,childrenProps:p.default.object.isRequired},t.default=(0,c.withStyles)(function(e){return{root:{height:"100%"}}})(y)},Wied:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.theme=void 0;var l=u(a("vqLa")),n=a("SUMQ"),r=u(a("fWIC"));function u(e){return e&&e.__esModule?e:{default:e}}t.theme=(0,n.createMuiTheme)({palette:{primary:l.default,secondary:l.default,error:r.default}})},"dB5+":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=b(a("QbLZ")),n=b(a("YEIV")),r=b(a("Yz+Y")),u=b(a("iCc5")),i=b(a("V7oC")),o=b(a("FYw3")),d=b(a("mRg0")),s=b(a("1DzM")),f=b(a("ctcd")),c=b(a("n5s8")),p=b(a("17x9")),m=b(a("q1tI")),h=b(a("XdPI")),g=b(a("ZqOF")),y=a("SUMQ");function b(e){return e&&e.__esModule?e:{default:e}}var v={string:"text",double:"number",int:"number",number:"number",long:"number",boolean:"checkbox","date-time":"datetime",date:"date"},E={text:["Like","=","!="],number:["=","<=","<","!=",">",">="],datetime:["=","!=","During"],date:["=","!=","During"]},w={Like:"LIKE","=":"=","<=":"<=","<":"<","!=":"<>",">":">",">=":">=",During:"DURING"},C=function(e){function t(){var e,a,i,d;(0,u.default)(this,t);for(var s=arguments.length,f=Array(s),c=0;c<s;c++)f[c]=arguments[c];return a=i=(0,o.default)(this,(e=t.__proto__||(0,r.default)(t)).call.apply(e,[this].concat(f))),i.handleChange=function(e){i.setState((0,n.default)({},e.target.name,e.target.value))},i.resetForm=function(){i.setState({value:"",op:"",attribute:""})},i.handleSubmit=function(e){e.preventDefault()},i.getAttributeType=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1],a=null,l=0;l<e.length;l++){var n=e[l];if(n.name===t){a=n.type.split(":").pop();break}}return a},i.getSupportedFilters=function(){var e=i.props,t=e.attributes,a=e.filter.attribute,l=i.getAttributeType(t,a),n=v[l]||"text";return E[n]||[]},i.getValueFieldProps=function(){var e=i.props,t=e.attributes,a=e.filter.attribute,l=i.getAttributeType(t,a),n=v[l],r={};return"date"===n?r.type="date":"datetime"===n&&(r.type="datetime-local"),r},i.getTextInput=function(){var e=i.props,t=e.attributes,a=e.classes,n=e.handleFilterChange,r=e.filter,u=r.attribute,o=r.value,d=r.op,s=r.start,f=r.end,c=i.getAttributeType(t,u),p=v[c],h=m.default.createElement(g.default,(0,l.default)({},i.getValueFieldProps(),{id:"value",required:!0,error:!o,label:"Value",InputProps:{name:"value"},className:a.textField,value:o,onChange:n,margin:"normal"}));return"date"!==p&&"datetime"!==p||"DURING"!==d||(h=[m.default.createElement(g.default,(0,l.default)({key:"start"},i.getValueFieldProps(),{id:"start",required:!0,error:!s,label:"start",InputProps:{name:"start"},className:a.textField,value:s,onChange:n,margin:"normal"})),m.default.createElement(g.default,(0,l.default)({key:"end"},i.getValueFieldProps(),{id:"end",required:!0,error:!f,label:"end",InputProps:{name:"end"},className:a.textField,value:f,onChange:n,margin:"normal"}))]),h},d=a,(0,o.default)(i,d)}return(0,d.default)(t,e),(0,i.default)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.attributes,l=t.classes,n=t.handleFilterChange,r=t.filter;return m.default.createElement("form",{className:l.form,onSubmit:this.handleSubmit,autoComplete:"off"},m.default.createElement(s.default,{className:l.formControl,error:!r.attribute},m.default.createElement(f.default,{htmlFor:"layer-select"},"Attribute"),m.default.createElement(h.default,{value:r.attribute,onChange:n,inputProps:{name:"attribute",id:"attribute-select"},autoWidth:!0},m.default.createElement(c.default,{value:""},m.default.createElement("em",null,"None")),a.map(function(e,t){return m.default.createElement(c.default,{key:t,value:e.name},e.name)}))),m.default.createElement(s.default,{className:l.formControl,error:!r.op},m.default.createElement(f.default,{htmlFor:"layer-select"},"Operation"),m.default.createElement(h.default,{value:r.op,onChange:n,inputProps:{name:"op",id:"op-select"},autoWidth:!0},m.default.createElement(c.default,{value:""},m.default.createElement("em",null,"None")),this.getSupportedFilters().map(function(e,t){return m.default.createElement(c.default,{key:t,value:w[e]},e)}))),this.getTextInput(),m.default.createElement("button",{ref:function(t){return e.formSubmit=t},type:"submit",hidden:!0}))}}]),t}(m.default.Component);C.propTypes={classes:p.default.object.isRequired,attributes:p.default.array.isRequired,filter:p.default.object.isRequired,handleFilterChange:p.default.func.isRequired},t.default=(0,y.withStyles)(function(e){return{formControl:{margin:e.spacing.unit,minWidth:120},root:{display:"flex",flexWrap:"wrap"},textField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit},form:{display:"flex",flexDirection:"column"}}})(C)},f002:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Message=t.Loader=void 0;var l=o(a("DKSo")),n=o(a("zEnc")),r=o(a("17x9")),u=o(a("q1tI")),i=o(a("6ZaM"));function o(e){return e&&e.__esModule?e:{default:e}}(t.Loader=function(e){var t=e.size,a=e.thickness,r=e.align,i=e.type;return u.default.createElement("div",{className:"text-"+(r||"center")},(void 0===i||"circle"===i)&&u.default.createElement(l.default,{size:t||50,thickness:a||5,className:"text-center"}),"line"===i&&u.default.createElement(n.default,{size:t||50,thickness:a||5,className:"text-center"}))}).propTypes={size:r.default.number,thickness:r.default.number,align:r.default.string,type:r.default.string},(t.Message=function(e){var t=e.align,a=e.type,l=e.message,n=e.color,r=e.noWrap;return u.default.createElement(i.default,{variant:a,align:t||"center",noWrap:void 0!==r?r:l.length>70,color:n||"inherit",className:"element-flex"},l)}).propTypes={type:r.default.string.isRequired,message:r.default.string.isRequired,align:r.default.string,color:r.default.string,noWrap:r.default.bool}},fTbZ:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CartoviewSnackBar=void 0;var l=k(a("Yz+Y")),n=k(a("iCc5")),r=k(a("V7oC")),u=k(a("FYw3")),i=k(a("mRg0")),o=k(a("QbLZ")),d=k(a("YEIV")),s=a("eO8H"),f=a("q1tI"),c=k(f),p=k(a("/rak")),m=k(a("hXeh")),h=k(a("qTMg")),g=k(a("yBWx")),y=k(a("tzQh")),b=k(a("VNM4")),v=k(a("3ZzI")),E=k(a("1IiC")),w=a("f002"),C=k(a("U/ks")),T=k(a("uniG")),S=k(a("pPbJ")),P=k(a("17x9")),x=k(a("MPIl")),L=k(a("xBje")),R=k(a("TSYQ")),F=k(a("XfWh")),_=a("SUMQ"),q=k(a("vmpl"));function k(e){return e&&e.__esModule?e:{default:e}}var M=function(e){var t=e.message;return c.default.createElement("span",{className:"element-flex",id:"message-id"},c.default.createElement(w.Loader,{size:20,thickness:4})," ",t," ")};M.propTypes={message:P.default.string.isRequired};var N=t.CartoviewSnackBar=function(e){var t=e.handleClose,a=e.open,l=e.message,n=c.default.createElement(M,{message:l});return c.default.createElement(L.default,{open:a,onClose:t||function(){},ContentProps:{"aria-describedby":"message-id"},message:n})};function I(e){return c.default.createElement(x.default,(0,o.default)({direction:"left"},e))}N.propTypes={handleClose:P.default.func,open:P.default.bool.isRequired,message:P.default.string.isRequired};var O=function(e){function t(){var e,a,r,i;(0,n.default)(this,t);for(var o=arguments.length,d=Array(o),s=0;s<o;s++)d[s]=arguments[s];return a=r=(0,u.default)(this,(e=t.__proto__||(0,l.default)(t)).call.apply(e,[this].concat(d))),r.geoCodingProps=function(){var e=r.props.childrenProps;return{searchText:e.searchText,geocodeSearchLoading:e.geocodeSearchLoading,geocodeSearch:e.geocodeSearch,resetGeocoding:e.resetGeocoding,geocodingResult:e.geocodingResult,handleGeocodingChange:e.handleGeocodingChange}},r.getDrawerProps=function(){var e=r.props.childrenProps;return{setThumbnail:e.setThumbnail,thumbnailSaving:e.thumbnailSaving,map:e.map,resetTablePagination:e.resetTablePagination,handleFeaturesTableDrawer:e.handleFeaturesTableDrawer,exportMap:e.exportMap,config:e.config,handleLayerVisibilty:e.handleLayerVisibilty,changeLayerOrder:e.changeLayerOrder,mapLayers:e.mapLayers,handleLayerOpacity:e.handleLayerOpacity,downloadLayer:e.downloadLayer,urls:e.urls,createLegends:e.createLegends,handleTableLayerChange:e.handleTableLayerChange,baseMaps:e.baseMaps,handleBaseMapVisibilty:e.handleBaseMapVisibilty,handlePrintModal:e.handlePrintModal}},r.getFeatureTableDrawerProps=function(){var e=r.props.childrenProps;return{attributes:e.layerAttributes,wfsService:e.wfsService,resetTablePagination:e.resetTablePagination,combinationType:e.combinationType,handleCombinationType:e.handleCombinationType,getFeatureTableData:e.getFeatureTableData,tableLayer:e.tableLayer,handleTableLayerChange:e.handleTableLayerChange,loading:e.featuresIsLoading,mapLayers:e.mapLayers,hanldeDrawerOpen:e.handleFeaturesTableDrawer,drawerOpen:e.featuresTableOpen,createQueryPanel:e.createQueryPanel,removeComponent:e.removeComponent,filters:e.filters,handleFilterChange:e.handleFilterChange,resetQuery:e.resetQuery}},r.getFeatureTableProps=function(){var e=r.props.childrenProps;return{handlePageChange:e.handlePageChange,handleRowsPerPage:e.handleRowsPerPage,page:e.page,rowsPerPage:e.rowsPerPage,getFeatureTableData:e.getFeatureTableData,totalFeatures:e.totalFeatures,searchEnabled:e.searchEnabled,resetFeatureCollection:e.resetFeatureCollection,addStyleToFeature:e.addStyleToFeature,loading:e.featuresIsLoading,zoomToFeature:e.zoomToFeature,features:e.features,resetQuery:e.resetQuery}},i=a,(0,u.default)(r,i)}return(0,i.default)(t,e),(0,r.default)(t,[{key:"render",value:function(){var e,t=this.props,a=t.classes,l=t.childrenProps;return c.default.createElement("div",{className:a.root},c.default.createElement("div",{className:(0,R.default)((e={},(0,d.default)(e,a.drawer,!!l.drawerOpen),(0,d.default)(e,a.drawerClose,!l.drawerOpen),e))},c.default.createElement(S.default,{className:(0,R.default)(a.DrawerBar,(0,d.default)({},a.DrawerOpenBar,l.drawerOpen))},c.default.createElement("div",{className:"element-flex "},c.default.createElement(E.default,{onTouchTap:l.toggleDrawer,color:"default","aria-label":"Open Menu"},c.default.createElement(T.default,null)),c.default.createElement(b.default,{config:this.geoCodingProps()})),!l.geocodeSearchLoading&&l.geocodingResult.length>0&&c.default.createElement(y.default,{resetGeocoding:l.resetGeocoding,action:l.zoomToExtent,geocodingResult:l.geocodingResult,geocodeSearchLoading:l.geocodeSearchLoading,boundlessGeoCodingEnabled:l.config.boundlessGeoCodingEnabled}),"                    "),c.default.createElement(I,{in:l.drawerOpen,direction:"right"},c.default.createElement(p.default,(0,o.default)({},this.getDrawerProps(),{className:(0,R.default)((0,d.default)({},a.drawerContentClose,!l.drawerOpen))})))),c.default.createElement(v.default,{className:a.root,container:!0,alignItems:"stretch",spacing:0},c.default.createElement(v.default,{item:!0,xs:12,sm:12,md:12,lg:12,xl:12},c.default.createElement(s.HashRouter,null,c.default.createElement(s.Route,{exact:!0,path:"/:x0?/:y0?/:x1?/:y1?",render:function(e){return c.default.createElement(C.default,(0,o.default)({loading:l.mapIsLoading},e,{enableHistory:l.config.enableHistory,map:l.map}))}})),l.mapLayers.length>0&&l.config.enableFeatureTable&&c.default.createElement(h.default,this.getFeatureTableDrawerProps(),c.default.createElement(g.default,this.getFeatureTableProps())),c.default.createElement(m.default,l))),c.default.createElement(N,{open:l.featureIdentifyLoading,message:"Searching For Features at this Point"}))}}]),t}(f.Component);O.propTypes={childrenProps:P.default.object.isRequired,classes:P.default.object.isRequired,width:P.default.string},t.default=(0,F.default)((0,_.withStyles)(function(e){var t;return{root:{height:"100%"},drawer:(0,d.default)({width:"30%",height:"100%",zIndex:"1150",position:"fixed"},e.breakpoints.down("md"),{width:"90%"}),drawerClose:{width:"0%",height:"100%",zIndex:"1150",position:"fixed"},drawerContentClose:{display:"none"},drawerContainer:{left:"0px !important"},DrawerBar:(t={width:"28%"},(0,d.default)(t,e.breakpoints.down("md"),{width:"88%"}),(0,d.default)(t,"zIndex","12"),(0,d.default)(t,"display","flex"),(0,d.default)(t,"flexDirection","column"),(0,d.default)(t,"position","fixed"),(0,d.default)(t,"top","1%"),(0,d.default)(t,"left","1%"),t),DrawerOpenBar:{width:"97% !important",zIndex:"12",display:"flex",flexDirection:"column",position:"absolute",top:"1%",left:"1%"}}}),(0,q.default)())(O)},hXeh:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=R(a("YEIV")),n=R(a("Yz+Y")),r=R(a("iCc5")),u=R(a("V7oC")),i=R(a("FYw3")),o=R(a("mRg0")),d=R(a("GQeE"));a("t2f6");var s=R(a("CarD")),f=R(a("8C4M")),c=R(a("1OZW")),p=R(a("ZPUd")),m=R(a("1IiC")),h=a("f002"),g=R(a("pPbJ")),y=R(a("17x9")),b=R(a("q1tI")),v=R(a("NeRm")),E=R(a("nzuV")),w=R(a("1TCx")),C=R(a("QUaF")),T=R(a("nwgO")),S=R(a("6ZaM")),P=R(a("ueZX")),x=R(a("TSYQ")),L=a("SUMQ");function R(e){return e&&e.__esModule?e:{default:e}}var F=function(e){return{root:{width:"100%",maxWidth:360,backgroundColor:e.palette.background.paper,position:"relative",overflow:"auto",maxHeight:300},button:{height:"auto"},titlePanel:{backgroundColor:e.palette.primary[500],borderColor:"#777777"},content:{backgroundColor:e.palette.background.paper},table:{display:"block",width:"100%",overflowX:"auto"},tableRow:{display:"flex",width:"100%",flexGrow:"1",height:"auto !important",flexBasis:"0","&:nth-of-type(odd)":{backgroundColor:e.palette.background.default}},tableCell:{flex:".5",alignItems:"center",padding:e.spacing.unit+"px !important",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}}},_=(0,L.withStyles)(F)(function(e){var t=e.currentFeature,a=e.classes;return b.default.createElement(v.default,{className:a.table},b.default.createElement(E.default,{className:a.table},(0,d.default)(t.getProperties()).map(function(e,l){if("geometry"!=e&&"_layerTitle"!==e&&"_attributesAlias"!==e&&"_layerName"!==e){var n=t.getProperties()._attributesAlias,r=n&&n[e]||e;return b.default.createElement(C.default,{classes:{root:a.tableRow},key:l},b.default.createElement(w.default,{classes:{body:a.tableCell}},""+r),b.default.createElement(w.default,{classes:{body:a.tableCell}},b.default.createElement(T.default,{id:"tooltip-top",title:""+t.getProperties()[e],placement:"top"},b.default.createElement("span",null,""+t.getProperties()[e]))))}})))});_.propTypes={currentFeature:y.default.object.isRequired};var q=function(e){function t(){var e,a,l,u;(0,r.default)(this,t);for(var o=arguments.length,d=Array(o),s=0;s<o;s++)d[s]=arguments[s];return a=l=(0,i.default)(this,(e=t.__proto__||(0,n.default)(t)).call.apply(e,[this].concat(d))),l.state={currentFeature:null},l.ensureEvents=function(){var e=l.props,t=e.resetFeatureCollection,a=e.changeShowPopup,n=e.nextFeature,r=e.previousFeature,u=e.zoomToFeature,i=l,o=i.popupCloser,d=i.nextButton,s=i.prevButton,f=i.zoomToButton;null===o.onclick&&(o.onclick=function(){return t(),a(),!1}),null===d.onclick&&(d.onclick=function(){n()}),null===s.onclick&&(s.onclick=function(){r()}),null===f.onclick&&(f.onclick=function(){var e=l.state.currentFeature;u(e)})},u=a,(0,i.default)(l,u)}return(0,o.default)(t,e),(0,u.default)(t,[{key:"componentWillReceiveProps",value:function(e){var t=this,a=this.props.addOverlay,l=e.featureIdentifyResult,n=e.activeFeature;if(e.showPopup){this.node.style.display="block";var r=l.length>0?l[n]:null;this.setState({currentFeature:r},function(){return a(t.node)}),this.ensureEvents()}else this.node.style.display="none"}},{key:"render",value:function(){var e=this,t=this.props,a=t.featureIdentifyResult,n=t.featureIdentifyLoading,r=t.activeFeature,u=t.classes,i=a.length>0&&r!=a.length-1,o=a[r];return b.default.createElement("div",{ref:function(t){return e.node=t},id:"popup",className:"ol-popup-cartoview"},b.default.createElement(g.default,{elevation:2},b.default.createElement("div",{className:(0,x.default)("title-panel",(0,l.default)({},u.titlePanel,!0))},0!=a.length&&b.default.createElement(S.default,{type:"body1",align:"left",noWrap:!0,color:"default",className:"element-flex title-text"},"Layer : "+o.get("_layerTitle")),b.default.createElement(m.default,{color:"default",className:(0,x.default)((0,l.default)({hidden:0===r,visible:0!=r,"popup-buttons":!0},u.button,!0)),buttonRef:function(t){return e.prevButton=t},"aria-label":"Delete"},b.default.createElement(s.default,null)),b.default.createElement(m.default,{color:"default",className:(0,x.default)((0,l.default)({hidden:!i,visible:i,"popup-buttons":!0},u.button,!0)),buttonRef:function(t){return e.nextButton=t},"aria-label":"Delete"},b.default.createElement(f.default,null)),b.default.createElement(m.default,{color:"default",buttonRef:function(t){return e.popupCloser=t},className:u.button,"aria-label":"Delete"},b.default.createElement(p.default,null))),b.default.createElement("div",{className:(0,x.default)("cartoview-popup-content",(0,l.default)({},u.content,!0))},a.length>0&&b.default.createElement("div",null,b.default.createElement(_,{currentFeature:o})),0==a.length&&!n&&b.default.createElement(h.Message,{message:"No Features at this Point",type:"subheading"})),b.default.createElement("div",{className:"cartoview-popup-actions center"},b.default.createElement("div",{ref:function(t){e.zoomToButton=t}},0!=a.length&&!n&&b.default.createElement(c.default,{color:"default",className:u.button,dense:"true"},b.default.createElement(P.default,null),b.default.createElement(S.default,{type:"caption",align:"left",noWrap:!1,color:"inherit"},"Zoom To Feature"))))))}}]),t}(b.default.Component);q.propTypes={resetFeatureCollection:y.default.func.isRequired,zoomToFeature:y.default.func.isRequired,addOverlay:y.default.func.isRequired,changeShowPopup:y.default.func.isRequired,addStyleToFeature:y.default.func.isRequired,nextFeature:y.default.func.isRequired,previousFeature:y.default.func.isRequired,featureIdentifyResult:y.default.array.isRequired,featureIdentifyLoading:y.default.bool.isRequired,showPopup:y.default.bool.isRequired,activeFeature:y.default.number.isRequired,map:y.default.object.isRequired,classes:y.default.object.isRequired},t.default=(0,L.withStyles)(F)(q)},qTMg:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=C(a("Yz+Y")),n=C(a("iCc5")),r=C(a("V7oC")),u=C(a("FYw3")),i=C(a("mRg0")),o=a("q1tI"),d=C(o),s=C(a("ZPUd")),f=C(a("EHL7")),c=C(a("ekFh")),p=C(a("1DzM")),m=C(a("1IiC")),h=C(a("ctcd")),g=a("f002"),y=C(a("pPbJ")),b=C(a("17x9")),v=C(a("vmk0")),E=C(a("XdPI")),w=a("SUMQ");function C(e){return e&&e.__esModule?e:{default:e}}var T=function(e){function t(){return(0,n.default)(this,t),(0,u.default)(this,(t.__proto__||(0,l.default)(t)).apply(this,arguments))}return(0,i.default)(t,e),(0,r.default)(t,[{key:"render",value:function(){var e=this.props,t=e.drawerOpen,a=e.classes,l=e.resetTablePagination,n=e.hanldeDrawerOpen,r=e.mapLayers,u=e.children,i=e.createQueryPanel,o=e.removeComponent,b=e.filters,w=e.loading,C=e.combinationType,T=e.handleCombinationType,S=e.tableLayer,P=e.handleTableLayerChange,x=e.getFeatureTableData,L=e.handleFilterChange,R=e.resetQuery,F=e.attributes;return d.default.createElement(c.default,{variant:"persistent",classes:{paper:a.drawerPaper},open:t,anchor:"bottom"},d.default.createElement(m.default,{onClick:n,color:"primary",className:a.button,"aria-label":"Close"},d.default.createElement(s.default,null)),d.default.createElement(f.default,null),d.default.createElement("div",null,d.default.createElement(y.default,{elevation:0,className:a.query},d.default.createElement("div",{className:a.layerSelector},d.default.createElement(p.default,{className:a.formControl},d.default.createElement(h.default,{htmlFor:"layer-select"},"Layer"),d.default.createElement(E.default,{native:!0,onChange:P,value:S,inputProps:{id:"layer-select"}},r.map(function(e,t){return d.default.createElement("option",{key:t,value:e.get("name")},e.get("name"))}))),d.default.createElement(p.default,{className:a.formControl},d.default.createElement(h.default,{htmlFor:"filters-match-select"},"Filters Matching"),d.default.createElement(E.default,{native:!0,onChange:T,value:C,inputProps:{id:"filters-match-select"}},d.default.createElement("option",{value:"any"},"Any"),d.default.createElement("option",{value:"all"},"All")))),d.default.createElement("div",{className:a.queryPanel},d.default.createElement(v.default,{handleFilterChange:L,filters:b,createQueryPanel:i,removeComponent:o,resetTablePagination:l,attributes:F,getFeatureTableData:x,resetQuery:R})),u)),w&&d.default.createElement(g.Loader,null))}}]),t}(o.Component);T.propTypes={classes:b.default.object.isRequired,drawerOpen:b.default.bool.isRequired,hanldeDrawerOpen:b.default.func.isRequired,resetTablePagination:b.default.func.isRequired,children:b.default.node,mapLayers:b.default.array.isRequired,loading:b.default.bool.isRequired,tableLayer:b.default.string.isRequired,attributes:b.default.array.isRequired,handleTableLayerChange:b.default.func.isRequired,getFeatureTableData:b.default.func.isRequired,createQueryPanel:b.default.func.isRequired,removeComponent:b.default.func.isRequired,filters:b.default.array.isRequired,handleFilterChange:b.default.func.isRequired,resetQuery:b.default.func.isRequired,combinationType:b.default.string.isRequired,handleCombinationType:b.default.func.isRequired},t.default=(0,w.withStyles)(function(e){return{drawerPaper:{height:"40%",width:"100%"},formControl:{margin:e.spacing.unit,minWidth:120},expansion:{padding:0},closeButton:{display:"flex",justifyContent:"flex-end"},layerSelector:{display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"center"},queryPanel:{display:"flex",flexDirection:"row",flexWrap:"wrap"},button:{margin:e.spacing.unit},query:{width:"100%",height:"100%",display:"block"},drawerHeader:e.mixins.toolbar}})(T)},qnMZ:function(e,t,a){"use strict";(function(e){var t=M(a("m1cH")),l=M(a("QbLZ")),n=M(a("Yz+Y")),r=M(a("iCc5")),u=M(a("V7oC")),i=M(a("FYw3")),o=M(a("mRg0"));a("W8A/"),a("RQfP"),a("1LhQ"),a("bZMm"),a("201c");var d=a("4AS+"),s=a("SrVH"),f=M(s),c=a("q1tI"),p=M(c),m=M(a("L1mC")),h=M(a("VtWp")),g=M(a("XImL")),y=M(a("CUE8")),b=M(a("FpwN")),v=M(a("pcsQ")),E=M(a("wGZG")),w=M(a("UoGI")),C=M(a("17x9")),T=M(a("GB6V")),S=M(a("YVZI")),P=M(a("5nHY")),x=M(a("At+4")),L=M(a("gJz9")),R=a("Nxrd"),F=a("Yvh9"),_=M(a("JW8z")),q=M(a("p5/s")),k=a("i8i4");function M(e){return e&&e.__esModule?e:{default:e}}var N={string:"text",double:"number",int:"number",number:"number",long:"number",boolean:"checkbox","date-time":"datetime",date:"date"};_.default.setProj4(q.default);var I=function(t){function a(t){(0,r.default)(this,a);var l=(0,i.default)(this,(a.__proto__||(0,n.default)(a)).call(this,t));O.call(l);var u=l.props,o=u.urls;u.config;return l.state={mapIsLoading:!0,drawerOpen:!1,featureIdentifyLoading:!1,activeFeature:0,mouseCoordinates:[0,0],featureIdentifyResult:[],layerAttributes:[],searchEnabled:!1,attributesLoading:!1,showPopup:!1,thumbnailSaving:!1,identifyEnabled:!0,geocodingResult:[],searchText:"",geocodeSearchLoading:!1,featureCollection:new y.default,map:g.default.getMap(),mapLayers:[],combinationType:"any",selectedRegion:"",baseMaps:[],filters:[],features:[],totalFeatures:0,featuresIsLoading:!1,featuresTableOpen:!1,tableLayer:"",page:0,rowsPerPage:25,printOpened:!1},e.map=l.state.map,l.styleHelper=new T.default,l.urls=new S.default(o.proxy),l.wfsService=new L.default(o.wfsURL,o.proxy),l.initGeocoding(),l}return(0,o.default)(a,t),(0,u.default)(a,[{key:"initGeocoding",value:function(){var e=null,t=null,a=this.props.config;a.boundlessGeoCodingEnabled?(e=d.BOUNDLESS_GEOCODING_URL,t=(0,l.default)({},d.BOUNDLESS_SETTINGS,{apikey:a.geocodingKey||""})):(e=d.ESRI_GEOCODING_URL,t=(0,l.default)({},d.ESRI_SETTINGS)),this.geocoding=new d.Geocoding(e,t)}},{key:"componentWillMount",value:function(){var e=this.state.map,t=this.props,a=t.urls,l=t.config;this.overlay=new w.default({autoPan:!0,autoPanAnimation:{duration:250},positioning:"center-center"}),e.addOverlay(this.overlay),this.addSelectionLayer(),g.default.mapInit(a.mapJsonUrl,e,a.proxy,l.token,this.mapLoaded)}},{key:"componentDidMount",value:function(){this.singleClickListner()}},{key:"setLayerSwitcherLayers",value:function(e){var t=this,a=this.state.tableLayer,l=[],n=[];e.map(function(e){e instanceof v.default?e instanceof v.default&&"base-group"===e.get("type")&&e.getLayers().getArray().map(function(e){return n.push(e)}):l.push(e)});var r={mapLayers:l.slice(0).reverse(),baseMaps:n};r.mapLayers.length>0&&(!a||""!==a)&&(r.tableLayer=r.mapLayers[0].get("name"),this.getFeatureTableData(0,25,r.tableLayer)),this.setState(r,function(){t.createLegends(),t.getTableLayerAttributes()})}},{key:"render",value:function(){return p.default.createElement(h.default,{childrenProps:this.getChildrenProps()})}}]),a}(c.Component),O=function(){var e=this;this.handleLayerOpacity=function(t){return function(a){var l=e.state.mapLayers;l[t].setOpacity(a),e.setState({mapLayers:l})}},this.createQueryPanel=function(){var a=e.state.filters,l={op:"",value:"",start:(new Date).toISOString(),end:(new Date).toISOString(),attribute:""};e.setState({filters:[].concat((0,t.default)(a),[l])})},this.removeComponent=function(t){var a=e.state.filters;a.splice(t,1),e.setState({filters:a})},this.resetQuery=function(){e.state.filters.length>0&&e.setState({filters:[]},function(){e.getFeatureTableData(0,25,e.state.tableLayer,!1)})},this.handleFilterChange=function(t){return function(a){var l=e.state.filters;if(t<l.length){var n=l;n[t][a.target.name]=a.target.value,e.setState({filters:n})}}},this.handlePageChange=function(t,a){e.setState({page:a},function(){e.getFeatureTableData(e.state.page*e.state.rowsPerPage,e.state.rowsPerPage)})},this.handleRowsPerPage=function(t){e.setState({rowsPerPage:t.target.value},function(){e.getFeatureTableData(e.state.page*e.state.rowsPerPage,e.state.rowsPerPage)})},this.handlePrintModal=function(){e.setState({printOpened:!e.state.printOpened})},this.handleFeaturesTableDrawer=function(){var t=e.state.featuresTableOpen;e.setState({featuresTableOpen:!t})},this.handleCombinationType=function(t){var a=t.target.value;a!==e.state.combinationType&&e.setState({combinationType:a})},this.capitalize=function(e){return e&&e[0].toUpperCase()+e.slice(1)},this.resetTablePagination=function(){e.setState({page:0,rowsPerPage:25})},this.handleNonDownload=function(t){var a=e.props.urls,l=e.urls.getProxiedURL(a.wfsURL);(0,F.doPost)(l,t).then(function(t){var a={features:s.wmsGetFeatureInfoFormats["application/json"].readFeatures(t),featuresIsLoading:!1,totalFeatures:t.totalFeatures};e.setState(a)})},this.handleDownloadFiltered=function(t){var a=e.state.tableLayer,l=e.props.urls,n=e.urls.getProxiedURL(l.wfsURL);(0,F.downloadFile)(n,a.split(":").pop()+".zip",t)},this.isValid=function(e){var t=e.value,a=e.attribute,l=e.op,n=e.start,r=e.end,u=!1;return"DURING"!==l?t&&a&&l&&(u=!0):n&&r&&a&&l&&(u=!0),u},this.getAttributeType=function(t){for(var a=e.state.layerAttributes,l=null,n=0;n<a.length;n++){var r=a[n];if(r.name===t){l=r.type.split(":").pop();break}}return l},this.getFilterObj=function(t){var a=e.getAttributeType(e.state.attribute),l=N[a],n=t.value,r=t.attribute,u=t.op,i=t.start,o=t.end;if(e.isValid(t))return"DURING"===u?{attribute:r,operator:u,value:n,start:new Date(i).toISOString(),end:new Date(o).toISOString()}:"date"===l||"datetime"===l?{attribute:r,operator:u,value:new Date(i).toISOString()}:{attribute:r,operator:u,value:n}},this.getFeatureTableData=function(t,a){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],u=e.state,i=u.filters,o=u.map,d=u.combinationType,s=[];if(i.map(function(t){e.isValid(t)&&s.push(e.getFilterObj(t))}),n||(n=e.state.tableLayer),n){var f={filters:s};r?f=(0,l.default)({},f,{outputFormat:"shape-zip"}):(e.setState({featuresIsLoading:!0,searchEnabled:!!s}),f=(0,l.default)({},f,{combinationType:d,maxFeatures:a,startIndex:t,pagination:!0,outputFormat:"application/json"})),e.wfsService.writeWFSGetFeature(o,n,f).then(function(t){var a=(new XMLSerializer).serializeToString(t);r?e.handleDownloadFiltered(a):e.handleNonDownload(a)})}},this.setThumbnail=function(){var t=e.state.map,a=e.props.urls;e.setState({thumbnailSaving:!0},function(){g.default.setThumbnail(t,a.thumbnailURL).then(function(t){e.setState({thumbnailSaving:!1},alert(t))})})},this.resetGeocoding=function(){e.setState({geocodingResult:[],searchText:""})},this.handleGeocodingChange=function(t){var a={searchText:t.target.value};""==t.target.value&&(a.geocodingResult=[]),e.setState(a)},this.getTableLayerAttributes=function(){var t=e.state.tableLayer;e.setState({attributesLoading:!0}),e.wfsService.describeFeatureType(t).then(function(t){var a={attributesLoading:!1};t.featureTypes.length>0&&(a.layerAttributes=t.featureTypes[0].properties.filter(function(e){return"the_geom"!==e.name})),e.setState(a)})},this.handleTableLayerChange=function(t){var a=t.target.value,l=e.state.tableLayer;a!==l&&e.setState({tableLayer:t.target.value,features:[],page:0,rowsPerPage:25},function(){e.getTableLayerAttributes(),e.getFeatureTableData(0,25,a)})},this.toggleDrawer=function(){var t=e.state.drawerOpen;e.setState({drawerOpen:!t})},this.geocodeSearch=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};e.setState({geocodeSearchLoading:!0});var l=e.state.searchText;e.geocoding.search(t||l,function(t){e.setState({geocodeSearchLoading:!1,geocodingResult:t}),a(t)})},this.addOverlay=function(t){var a=e.state,l=a.activeFeature,n=a.featureIdentifyResult,r=a.mouseCoordinates;if(n.length>0){var u=n[l].getGeometry();r=f.default.getGeometryCenter(u)}e.overlay.setElement(t),e.overlay.setPosition(r)},this.changeShowPopup=function(){var t=e.state.showPopup;e.setState({showPopup:!t})},this.mapLoaded=function(){var t=e.state.map.getLayers().getArray();e.setLayerSwitcherLayers(t),e.setState({mapIsLoading:!1})},this.addSelectionLayer=function(){var t=e.state,a=t.featureCollection,l=t.map,n=new x.default({features:a});new P.default({source:n,style:e.styleHelper.styleFunction,title:"Selected Features",zIndex:1e4,format:new b.default({defaultDataProjection:l.getView().getProjection(),featureProjection:l.getView().getProjection()}),map:l}),n.on("addfeature",function(e){m.default.flash(e.feature,l)})},this.downloadLayer=function(t){var a=e.props.config,l=e.wfsService.buildGetFeatureURL(t,void 0,void 0,void 0,void 0,void 0,"shape-zip",a.token);(0,F.downloadFile)(l,t+".zip")},this.handleBaseMapVisibilty=function(t,a){var l=e.state.baseMaps;l.map(function(e){a===e.get("id")?e.setVisible(!0):e.setVisible(!1)}),e.setState({baseMaps:l})},this.zoomToFeature=function(t){var a=e.state.map;e.addStyleToFeature([t]),g.default.fitExtent(t.getGeometry().getExtent(),a,400)},this.zoomToLocation=function(t){var a=e.state.map;g.default.zoomToLocation(t,a)},this.zoomToExtent=function(t){var a=e.state.map;g.default.fitExtent(g.default.reprojectExtent(t,a),a)},this.handleLayerVisibilty=function(t){return function(a,l){var n=e.state.mapLayers;n[t].setVisible(l),e.setState({mapLayers:n})}},this.changeLayerOrder=function(t){var a=t.oldIndex,l=t.newIndex,n=e.state.mapLayers,r=(0,R.arrayMove)(n,a,l);r.map(function(e,t){e.setZIndex(n.length-t)}),e.setState({mapLayers:r})},this.singleClickListner=function(){var t=e.state.map;t.on("singleclick",function(a){e.overlay&&e.overlay.setElement(void 0),e.setState({mouseCoordinates:a.coordinate,featureIdentifyLoading:!0,activeFeature:0,featureIdentifyResult:[],showPopup:!1}),e.featureIdentify(t,a.coordinate)})},this.createLegends=function(){var t=e.state.mapLayers,a=e.props,l=a.config,n=a.urls,r=[];return t.map(function(e){var t=e.getProperties().title;e.getVisible()&&r.push({layer:t,url:E.default.getLegendURL(e,l.token,n.proxy)})}),r},this.resetFeatureCollection=function(){e.state.featureCollection.clear()},this.addStyleToFeature=function(t){var a=e.state.featureCollection;e.resetFeatureCollection(),t&&t.length>0&&a.extend(t)},this.featureIdentify=function(t,a){var l=e.props,n=l.urls,r=l.config;f.default.featureIdentify(t,a,n.proxy,r.token,n.layerAttributes).then(function(t){e.setState({featureIdentifyLoading:!1,featureIdentifyResult:t,activeFeature:0,showPopup:!0},function(){return e.addStyleToFeature(t)})}).catch(function(t){e.setState({featureIdentifyLoading:!1},alert(t.text()))})},this.addStyleToCurrentFeature=function(){var t=e.state,a=t.activeFeature,l=t.featureIdentifyResult;e.addStyleToFeature([l[a]])},this.nextFeature=function(){var t=e.state.activeFeature+1;e.setState({activeFeature:t},e.addStyleToCurrentFeature)},this.previousFeature=function(){var t=e.state.activeFeature-1;e.setState({activeFeature:t},e.addStyleToCurrentFeature)},this.exportMap=function(){var t=e.state.map;g.default.exportMap(t)},this.getChildrenProps=function(){var t=e.props,a=t.config,n=t.urls;return(0,l.default)({config:a},e.state,{handlePrintModal:e.handlePrintModal,downloadLayer:e.downloadLayer,zoomToFeature:e.zoomToFeature,addStyleToFeature:e.addStyleToFeature,resetFeatureCollection:e.resetFeatureCollection,layerName:E.default.layerName,layerNameSpace:E.default.layerNameSpace,toggleDrawer:e.toggleDrawer,urls:n,handleFilterChange:e.handleFilterChange,handleCombinationType:e.handleCombinationType,createLegends:e.createLegends,setThumbnail:e.setThumbnail,getFeatures:e.wfsService.getFeatures,wfsService:e.wfsService,handleTableLayerChange:e.handleTableLayerChange,addOverlay:e.addOverlay,changeShowPopup:e.changeShowPopup,nextFeature:e.nextFeature,previousFeature:e.previousFeature,changeLayerOrder:e.changeLayerOrder,handleLayerVisibilty:e.handleLayerVisibilty,zoomToLocation:e.zoomToLocation,zoomToExtent:e.zoomToExtent,resetTablePagination:e.resetTablePagination,exportMap:e.exportMap,geocodeSearch:e.geocodeSearch,handlePageChange:e.handlePageChange,handleRowsPerPage:e.handleRowsPerPage,handleBaseMapVisibilty:e.handleBaseMapVisibilty,getFeatureTableData:e.getFeatureTableData,createQueryPanel:e.createQueryPanel,removeComponent:e.removeComponent,resetQuery:e.resetQuery,handleFeaturesTableDrawer:e.handleFeaturesTableDrawer,handleGeocodingChange:e.handleGeocodingChange,resetGeocoding:e.resetGeocoding,handleLayerOpacity:e.handleLayerOpacity})}};I.propTypes={urls:C.default.object.isRequired,config:C.default.object.isRequired},e.BasicViewerContainer={show:function(e,t,a){(0,k.render)(p.default.createElement(I,{urls:a,config:t}),document.getElementById(e))},getComponent:function(e,t){return p.default.createElement(I,{urls:t,config:e})}}}).call(this,a("yLpj"))},t2f6:function(e,t){},tzQh:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=y(a("YEIV")),n=y(a("Yz+Y")),r=y(a("iCc5")),u=y(a("V7oC")),i=y(a("FYw3")),o=y(a("mRg0")),d=(y(a("zWwt")),y(a("JgXy"))),s=y(a("NABS")),f=y(a("4eE1")),c=(a("f002"),y(a("pPbJ"))),p=y(a("17x9")),m=y(a("q1tI")),h=y(a("TSYQ")),g=a("SUMQ");function y(e){return e&&e.__esModule?e:{default:e}}var b=function(e){function t(){var e,a,l,u;(0,r.default)(this,t);for(var o=arguments.length,d=Array(o),s=0;s<o;s++)d[s]=arguments[s];return a=l=(0,i.default)(this,(e=t.__proto__||(0,n.default)(t)).call.apply(e,[this].concat(d))),l.zoomTo=function(e){var t=l.props,a=t.action;(0,t.resetGeocoding)(),a(e)},u=a,(0,i.default)(l,u)}return(0,o.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.geocodingResult,n=t.classes,r=t.geocodeSearchLoading;return m.default.createElement(c.default,{className:(0,h.default)("geocoding-result",(0,l.default)({},n.hide,r)),elevation:0},m.default.createElement(d.default,{className:"full-width",component:"nav"},a.map(function(t,a){return m.default.createElement(s.default,{onTouchTap:function(){return e.zoomTo(t.bbox)},key:a,button:!0},m.default.createElement(f.default,{primary:t.formatted}))})))}}]),t}(m.default.Component);b.propTypes={classes:p.default.object.isRequired,resetGeocoding:p.default.func.isRequired,geocodingResult:p.default.array.isRequired,action:p.default.func.isRequired,geocodeSearchLoading:p.default.bool.isRequired},t.default=(0,g.withStyles)(function(e){return{hide:{display:"none"}}})(b)},vmk0:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=y(a("Yz+Y")),n=y(a("iCc5")),r=y(a("V7oC")),u=y(a("FYw3")),i=y(a("mRg0")),o=y(a("1waj")),d=y(a("rOC7")),s=y(a("1IiC")),f=y(a("17x9")),c=y(a("dB5+")),p=y(a("q1tI")),m=y(a("8Gle")),h=y(a("bSwy")),g=a("SUMQ");function y(e){return e&&e.__esModule?e:{default:e}}var b=function(e){function t(){return(0,n.default)(this,t),(0,u.default)(this,(t.__proto__||(0,l.default)(t)).apply(this,arguments))}return(0,i.default)(t,e),(0,r.default)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.handleFilterChange,l=e.removeComponent,n=e.createQueryPanel,r=e.getFeatureTableData,u=e.filters,i=e.attributes;return p.default.createElement("div",{className:t.root},p.default.createElement("div",{className:t.queryBuilderTools},p.default.createElement(s.default,{onClick:n,className:t.button,"aria-label":"Add"},p.default.createElement(o.default,null)),u.length>0&&p.default.createElement(s.default,{onClick:function(){return r(void 0,void 0,void 0,!1)},className:t.button,"aria-label":"Search"},p.default.createElement(h.default,null)),u.length>0&&p.default.createElement(s.default,{onClick:function(){return r(void 0,void 0,void 0,!0)},className:t.button,"aria-label":"Download with Filters"},p.default.createElement(d.default,null))),p.default.createElement("div",{className:t.queryItemsContainer},u.length>0&&u.map(function(e,n){return p.default.createElement("div",{className:t.item,key:n},p.default.createElement(c.default,{handleFilterChange:a(n),filter:e,attributes:i}),p.default.createElement(s.default,{onClick:function(){return l(n)},className:t.button,"aria-label":"Delete"},p.default.createElement(m.default,null)))})))}}]),t}(p.default.Component);b.propTypes={classes:f.default.object.isRequired,attributes:f.default.array.isRequired,getFeatureTableData:f.default.func.isRequired,resetTablePagination:f.default.func.isRequired,removeComponent:f.default.func.isRequired,createQueryPanel:f.default.func.isRequired,filters:f.default.array.isRequired,handleFilterChange:f.default.func.isRequired},t.default=(0,g.withStyles)(function(e){return{root:{display:"flex",flexGrow:"1",flexDirection:"column"},queryBuilderTools:{display:"flex",flexWrap:"wrap",alignItems:"center",justifyContent:"center"},queryItemsContainer:{display:"flex",flexGrow:"1",flexWrap:"wrap",justifyContent:"center"},item:{display:"flex",alignItems:"center",flexDirection:"column",flexWrap:"wrap",justifyContent:"center",margin:e.spacing.unit,border:"2px #b8b8b8 solid"}}})(b)},yBWx:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=C(a("GQeE")),n=C(a("Yz+Y")),r=C(a("iCc5")),u=C(a("V7oC")),i=C(a("FYw3")),o=C(a("mRg0"));a("z2Xg");var d=C(a("1OZW")),s=C(a("1IiC")),f=a("f002"),c=C(a("17x9")),p=C(a("q1tI")),m=C(a("NeRm")),h=C(a("nzuV")),g=C(a("1TCx")),y=C(a("8+ys")),b=C(a("xfbS")),v=C(a("QUaF")),E=C(a("ueZX")),w=a("SUMQ");function C(e){return e&&e.__esModule?e:{default:e}}var T=(0,w.withStyles)(function(e){return{head:{backgroundColor:e.palette.primary.light,color:e.palette.common.white},body:{fontSize:14}}})(g.default),S=function(e){function t(){var e,a,u,o;(0,r.default)(this,t);for(var d=arguments.length,s=Array(d),f=0;f<d;f++)s[f]=arguments[f];return a=u=(0,i.default)(this,(e=t.__proto__||(0,n.default)(t)).call.apply(e,[this].concat(s))),u.getTableCol=function(){var e=u.props.features,t=[];if(e.length>0){var a=e[0];(0,l.default)(a.getProperties()).map(function(e){"the_geom"!==e&&"geometry"!==e&&t.push(e)})}return t},o=a,(0,i.default)(u,o)}return(0,o.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.loading,l=t.features,n=t.addStyleToFeature,r=t.resetFeatureCollection,u=t.classes,i=t.handlePageChange,o=t.handleRowsPerPage,c=t.page,w=t.rowsPerPage,C=t.totalFeatures,S=t.zoomToFeature,P=t.resetQuery;return p.default.createElement("div",{elevation:2,className:u.root},p.default.createElement("div",{className:u.actions},l.length>0&&p.default.createElement(d.default,{onClick:function(){return n(l)},color:"primary"},"Show On Map"),l.length>0&&p.default.createElement(d.default,{onClick:function(){return r()},color:"primary"},"Clear Map Selection"),p.default.createElement(d.default,{onClick:P,color:"primary"},"Reset")),p.default.createElement("div",{className:u.tableContainer},!a&&l.length>0&&p.default.createElement(m.default,{className:u.table},p.default.createElement(y.default,null,p.default.createElement(v.default,null,p.default.createElement(T,null,"Actions"),this.getTableCol().map(function(e,t){return p.default.createElement(T,{key:t},e)}))),p.default.createElement(h.default,null,l.map(function(t,a){return p.default.createElement(v.default,{className:u.row,key:a},p.default.createElement(g.default,null,p.default.createElement(s.default,{className:u.button,onClick:function(){return S(t)},"aria-label":"Delete"},p.default.createElement(E.default,null))),e.getTableCol().map(function(e,a){return p.default.createElement(g.default,{key:a},t.getProperties()[e])}))}))),!a&&l.length>0&&p.default.createElement(b.default,{component:"div",count:C,rowsPerPage:w,labelDisplayedRows:function(e){e.from;return"This Page Showing "+e.to+" of "+e.count+" Result/Total"},page:c,labelRowsPerPage:"Number Of Features Per Page",rowsPerPageOptions:[5,10,25,50,100,200,400],backIconButtonProps:{"aria-label":"Previous Page"},nextIconButtonProps:{"aria-label":"Next Page"},onChangePage:i,onChangeRowsPerPage:o}),!a&&0==l.length&&p.default.createElement(f.Message,{type:"title",message:"No Features"})))}}]),t}(p.default.Component);S.propTypes={features:c.default.array.isRequired,classes:c.default.object.isRequired,searchEnabled:c.default.bool.isRequired,totalFeatures:c.default.number.isRequired,zoomToFeature:c.default.func.isRequired,getFeatureTableData:c.default.func.isRequired,addStyleToFeature:c.default.func.isRequired,resetFeatureCollection:c.default.func.isRequired,loading:c.default.bool.isRequired,handlePageChange:c.default.func.isRequired,handleRowsPerPage:c.default.func.isRequired,page:c.default.number.isRequired,rowsPerPage:c.default.number.isRequired,resetQuery:c.default.func.isRequired},t.default=(0,w.withStyles)(function(e){return{root:{width:"100%",height:"100%",display:"block"},button:{height:"auto !important"},tableContainer:{maxWidth:"99.9%",overflowX:"scroll"},row:{"&:nth-of-type(odd)":{backgroundColor:e.palette.background.default}},actions:{display:"flex",justifyContent:"center"}}})(S)}})});
//# sourceMappingURL=/static/cartoview_basic_viewer/dist/sourcemaps/../BasicViewer.bundle.js.map
//# sourceMappingURL=BasicViewer.bundle.js.map